var DOG_URL="/static/assets/media/audio/dog-bark.mp3"
var CORK_URL="/static/assets/media/audio/cork-pop.mp3";/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/;if("document"in self&&!("classList"in document.createElement("_"))){(function(j){"use strict";if(!("Element"in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return-1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false;do{r=t[s]+"";var q=g(this,r);if(q!==-1){this.splice(q,1);o=true}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}return!o};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))};(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}
if(!window.requestAnimationFrame)
window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};if(!window.cancelAnimationFrame)
window.cancelAnimationFrame=function(id){clearTimeout(id);};}());/*!
 * Packery PACKAGED v1.2.0
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2013 Metafizzy
 */(function(window){var slice=Array.prototype.slice;function noop(){}
function defineBridget($){if(!$){return;}
function addOptionMethod(PluginClass){if(PluginClass.prototype.option){return;}
PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}
this.options=$.extend(true,this.options,opts);};}
var logError=typeof console==='undefined'?noop:function(message){console.error(message);};function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if(typeof options==='string'){var args=slice.call(arguments,1);for(var i=0,len=this.length;i<len;i++){var elem=this[i];var instance=$.data(elem,namespace);if(!instance){logError("cannot call methods on "+namespace+" prior to initialization; "+"attempted to call '"+options+"'");continue;}
if(!$.isFunction(instance[options])||options.charAt(0)==='_'){logError("no such method '"+options+"' for "+namespace+" instance");continue;}
var returnValue=instance[options].apply(instance,args);if(returnValue!==undefined){return returnValue;}}
return this;}else{return this.each(function(){var instance=$.data(this,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(this,options);$.data(this,namespace,instance);}});}};}
$.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass);bridge(namespace,PluginClass);};return $.bridget;}
if(typeof define==='function'&&define.amd){define('jquery-bridget/jquery.bridget',['jquery'],defineBridget);}else{defineBridget(window.jQuery);}})(window);/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */(function(window){function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define('classie/classie',classie);}else{window.classie=classie;}})(window);/*!
 * getStyleProperty v1.0.3
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 */(function(window){var prefixes='Webkit Moz ms Ms O'.split(' ');var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return;}
if(typeof docElemStyle[propName]==='string'){return propName;}
propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==='string'){return prefixed;}}}
if(typeof define==='function'&&define.amd){define('get-style-property/get-style-property',[],function(){return getStyleProperty;});}else if(typeof exports==='object'){module.exports=getStyleProperty;}else{window.getStyleProperty=getStyleProperty;}})(window);(function(window,undefined){var defView=document.defaultView;var isComputedStyle=defView&&defView.getComputedStyle;var getStyle=isComputedStyle?function(elem){return defView.getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')===-1&&!isNaN(num);return isValid&&num;}
var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0;}
return size;}
function defineGetSize(getStyleProperty){var boxSizingProp=getStyleProperty('boxSizing');var isBoxSizeOuter;(function(){if(!boxSizingProp){return;}
var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style[boxSizingProp]='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div);})();function getSize(elem){if(typeof elem==='string'){elem=document.querySelector(elem);}
if(!elem||typeof elem!=='object'||!elem.nodeType){return;}
var style=getStyle(elem);if(style.display==='none'){return getZeroSize();}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==='border-box');for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+
(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}
var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+
(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}
function mungeNonPixel(elem,value){if(isComputedStyle||value.indexOf('%')===-1){return value;}
var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left;}
style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft;}
return value;}
return getSize;}
if(typeof define==='function'&&define.amd){define('get-size/get-size',['get-style-property/get-style-property'],defineGetSize);}else if(typeof exports==='object'){module.exports=defineGetSize(require('get-style-property'));}else{window.getSize=defineGetSize(window.getStyleProperty);}})(window);/*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */(function(window){'use strict';var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event;}
if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false);};}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event);}:function(){var event=getIEEvent(obj);fn.call(obj,event);};obj.attachEvent("on"+type,obj[type+fn]);};}
var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false);};}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn];}catch(err){obj[type+fn]=undefined;}};}
var eventie={bind:bind,unbind:unbind};if(typeof define==='function'&&define.amd){define(eventie);}else{window.eventie=eventie;}})(this);/*!
 * docReady
 * Cross browser DOMContentLoaded event emitter
 */(function(window){var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=='function'){return;}
if(docReady.isReady){fn();}else{queue.push(fn);}}
docReady.isReady=false;function init(event){var isIE8NotReady=event.type==='readystatechange'&&document.readyState!=='complete';if(docReady.isReady||isIE8NotReady){return;}
docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn();}}
function defineDocReady(eventie){eventie.bind(document,'DOMContentLoaded',init);eventie.bind(document,'readystatechange',init);eventie.bind(window,'load',init);return docReady;}
if(typeof define==='function'&&define.amd){docReady.isReady=typeof requirejs==='function';define('doc-ready/doc-ready',['eventie/eventie'],defineDocReady);}else{window.docReady=defineDocReady(window.eventie);}})(this);/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */(function(){function EventEmitter(){}
var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i;}}
return-1;}
function alias(name){return function aliasClosure(){return this[name].apply(this,arguments);};}
proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(typeof evt==='object'){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key];}}}
else{response=events[evt]||(events[evt]=[]);}
return response;};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener);}
return flatListeners;};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners;}
return response||listeners;};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false});}}
return this;};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true});};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this;};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i]);}
return this;};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1);}}}
return this;};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners);};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners);};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value);}
else{multiple.call(this,i,value);}}}}
else{i=listeners.length;while(i--){single.call(this,evt,listeners[i]);}}
return this;};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt];}
else if(type==='object'){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key];}}}
else{delete this._events;}
return this;};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener);}
response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener);}}}}
return this;};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args);};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this;};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue;}
else{return true;}};proto._getEvents=function _getEvents(){return this._events||(this._events={});};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter;};if(typeof define==='function'&&define.amd){define('eventEmitter/EventEmitter',[],function(){return EventEmitter;});}
else if(typeof module==='object'&&module.exports){module.exports=EventEmitter;}
else{this.EventEmitter=EventEmitter;}}.call(this));(function(global,ElemProto){var matchesMethod=(function(){if(ElemProto.matchesSelector){return'matchesSelector';}
var prefixes=['webkit','moz','ms','o'];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}})();function match(elem,selector){return elem[matchesMethod](selector);}
function checkParent(elem){if(elem.parentNode){return;}
var fragment=document.createDocumentFragment();fragment.appendChild(elem);}
function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return true;}}
return false;}
function matchChild(elem,selector){checkParent(elem);return match(elem,selector);}
var matchesSelector;if(matchesMethod){var div=document.createElement('div');var supportsOrphans=match(div,'div');matchesSelector=supportsOrphans?match:matchChild;}else{matchesSelector=query;}
if(typeof define==='function'&&define.amd){define('matches-selector/matches-selector',[],function(){return matchesSelector;});}else{window.matchesSelector=matchesSelector;}})(this,Element.prototype);(function(window){var defView=document.defaultView;var getStyle=defView&&defView.getComputedStyle?function(elem){return defView.getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
function isEmptyObj(obj){for(var prop in obj){return false;}
prop=null;return true;}
function toDash(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase();});}
function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){var transitionProperty=getStyleProperty('transition');var transformProperty=getStyleProperty('transform');var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty('perspective');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProperty];var prefixableProperties=['transform','transition','transitionDuration','transitionProperty'];var vendorProperties=(function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp;}}
return cache;})();function Item(element,layout){if(!element){return;}
this.element=element;this.layout=layout;this.position={x:0,y:0};this._create();}
extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'});};Item.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Item.prototype.getSize=function(){this.size=getSize(this.element);};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop];}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var x=parseInt(style[isOriginLeft?'left':'right'],10);var y=parseInt(style[isOriginTop?'top':'bottom'],10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y;};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};if(layoutOptions.isOriginLeft){style.left=(this.position.x+layoutSize.paddingLeft)+'px';style.right='';}else{style.right=(this.position.x+layoutSize.paddingRight)+'px';style.left='';}
if(layoutOptions.isOriginTop){style.top=(this.position.y+layoutSize.paddingTop)+'px';style.bottom='';}else{style.bottom=(this.position.y+layoutSize.paddingBottom)+'px';style.top='';}
this.css(style);this.emitEvent('layout',[this]);};var translate=is3d?function(x,y){return'translate3d('+x+'px, '+y+'px, 0)';}:function(x,y){return'translate('+x+'px, '+y+'px)';};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return;}
var transX=x-curX;var transY=y-curY;var transitionStyle={};var layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX;transY=layoutOptions.isOriginTop?transY:-transY;transitionStyle.transform=translate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true});};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition();};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10);};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to);}
for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this);}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return;}
var _transition=this._transition;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop];}
for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true;}}
if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null;}
this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true;};var itemTransitionProperties=transformProperty&&(toDash(transformProperty)+',opacity');Item.prototype.enableTransition=function(){if(this.isTransitioning){return;}
this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false);};Item.prototype.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event);};Item.prototype.onotransitionend=function(event){this.ontransitionend(event);};var dashedVendorProperties={'-webkit-transform':'transform','-moz-transform':'transform','-o-transform':'transform'};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return;}
var _transition=this._transition;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition();}
if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName];}
if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName];}
this.emitEvent('transitionEnd',[this]);};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false;};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]='';}
this.css(cleanStyle);};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle);};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent('remove',[this]);};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return;}
var _this=this;this.on('transitionEnd',function(){_this.removeElem();return true;});this.hide();};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true});};Item.prototype.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:'none'});}}}});};Item.prototype.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''});};return Item;}
if(typeof define==='function'&&define.amd){define('outlayer/item',['eventEmitter/EventEmitter','get-size/get-size','get-style-property/get-style-property'],outlayerItemDefinition);}else{window.Outlayer={};window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty);}})(window);/*!
 * Outlayer v1.1.9
 * the brains and guts of a layout library
 */(function(window){var document=window.document;var console=window.console;var jQuery=window.jQuery;var noop=function(){};function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]';}
function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj;}else if(obj&&typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;}
var isElement=(typeof HTMLElement==='object')?function isElementDOM2(obj){return obj instanceof HTMLElement;}:function isElementQuirky(obj){return obj&&typeof obj==='object'&&obj.nodeType===1&&typeof obj.nodeName==='string';};var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj);}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i;}}
return-1;};function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1);}}
function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();}
function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){var GUID=0;var instances={};function Outlayer(element,options){if(typeof element==='string'){element=document.querySelector(element);}
if(!element||!isElement(element)){if(console){console.error('Bad '+this.settings.namespace+' element: '+element);}
return;}
this.element=element;this.options=extend({},this.options);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout();}}
Outlayer.prototype.settings={namespace:'outlayer',item:Item};Outlayer.prototype.options={containerStyle:{position:'relative'},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){extend(this.options,opts);};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize();}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children);};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.settings.item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item);}
return items;};Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);var itemSelector=this.options.itemSelector;var itemElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!isElement(elem)){continue;}
if(itemSelector){if(matchesSelector(elem,itemSelector)){itemElems.push(elem);}
var childElems=elem.querySelectorAll(itemSelector);for(var j=0,jLen=childElems.length;j<jLen;j++){itemElems.push(childElems[j]);}}else{itemElems.push(elem);}}
return itemElems;};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element);}
return elems;};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true;};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize();};Outlayer.prototype.getSize=function(){this.size=getSize(this.element);};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0;}else{if(typeof option==='string'){elem=this.element.querySelector(option);}else if(isElement(option)){elem=option;}
this[measurement]=elem?getSize(elem)[size]:option;}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout();};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item);}}
return layoutItems;};Outlayer.prototype._layoutItems=function(items,isInstant){if(!items||!items.length){this.emitEvent('layoutComplete',[this,items]);return;}
this._itemsOn(items,'layout',function onItemsLayout(){this.emitEvent('layoutComplete',[this,items]);});var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant;queue.push(position);}
this._processLayoutQueue(queue);};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0};};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant);}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y);}else{item.moveTo(x,y);}};Outlayer.prototype._postLayout=function(){var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false);}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return;}
var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+
elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+
elemSize.borderTopWidth+elemSize.borderBottomWidth;}
measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px';};Outlayer.prototype._itemsOn=function(items,eventName,callback){var doneCount=0;var count=items.length;var _this=this;function tick(){doneCount++;if(doneCount===count){callback.call(_this);}
return true;}
for(var i=0,len=items.length;i<len;i++){var item=items[i];item.on(eventName,tick);}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true;}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored;}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return;}
this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem);}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return;}
for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];removeFrom(elem,this.stamps);this.unignore(elem);}};Outlayer.prototype._find=function(elems){if(!elems){return;}
if(typeof elems==='string'){elems=this.element.querySelectorAll(elems);}
elems=makeArray(elems);return elems;};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return;}
this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp);}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)};};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset;};Outlayer.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return;}
eventie.bind(window,'resize',this);this.isResizeBound=true;};Outlayer.prototype.unbindResize=function(){eventie.unbind(window,'resize',this);this.isResizeBound=false;};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout);}
var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout;}
this.resizeTimeout=setTimeout(delayed,100);};Outlayer.prototype.resize=function(){var size=getSize(this.element);var hasSizes=this.size&&size;if(hasSizes&&size.innerWidth===this.size.innerWidth){return;}
this.layout();};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items);}
return items;};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}
this.layoutItems(items,true);this.reveal(items);};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}
var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems);};Outlayer.prototype.reveal=function(items){if(!items||!items.length){return;}
for(var i=0,len=items.length;i<len;i++){var item=items[i];item.reveal();}};Outlayer.prototype.hide=function(items){if(!items||!items.length){return;}
for(var i=0,len=items.length;i<len;i++){var item=items[i];item.hide();}};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item;}}};Outlayer.prototype.getItems=function(elems){if(!elems||!elems.length){return;}
var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item);}}
return items;};Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(!removeItems||!removeItems.length){return;}
this._itemsOn(removeItems,'remove',function(){this.emitEvent('removeComplete',[this,removeItems]);});for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();removeFrom(item,this.items);}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy();}
this.unbindResize();delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.settings.namespace);}};Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id];};function copyOutlayerProto(obj,property){obj.prototype[property]=extend({},Outlayer.prototype[property]);}
Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments);}
extend(Layout.prototype,Outlayer.prototype);copyOutlayerProto(Layout,'options');copyOutlayerProto(Layout,'settings');extend(Layout.prototype.options,options);Layout.prototype.settings.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments);};Layout.Item.prototype=new Item();Layout.prototype.settings.item=Layout.Item;docReady(function(){var dashedNamespace=toDashed(namespace);var elems=document.querySelectorAll('.js-'+dashedNamespace);var dataAttr='data-'+dashedNamespace+'-options';for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+
elem.nodeName.toLowerCase()+(elem.id?'#'+elem.id:'')+': '+
error);}
continue;}
var instance=new Layout(elem,options);if(jQuery){jQuery.data(elem,namespace,instance);}}});if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout);}
return Layout;};Outlayer.Item=Item;return Outlayer;}
if(typeof define==='function'&&define.amd){define('outlayer/outlayer',['eventie/eventie','doc-ready/doc-ready','eventEmitter/EventEmitter','get-size/get-size','matches-selector/matches-selector','./item'],outlayerDefinition);}else{window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item);}})(window);(function(window){var Packery=window.Packery=function(){};function rectDefinition(){function Rect(props){for(var prop in Rect.defaults){this[prop]=Rect.defaults[prop];}
for(prop in props){this[prop]=props[prop];}}
Packery.Rect=Rect;Rect.defaults={x:0,y:0,width:0,height:0};Rect.prototype.contains=function(rect){var otherWidth=rect.width||0;var otherHeight=rect.height||0;return this.x<=rect.x&&this.y<=rect.y&&this.x+this.width>=rect.x+otherWidth&&this.y+this.height>=rect.y+otherHeight;};Rect.prototype.overlaps=function(rect){var thisRight=this.x+this.width;var thisBottom=this.y+this.height;var rectRight=rect.x+rect.width;var rectBottom=rect.y+rect.height;return this.x<rectRight&&thisRight>rect.x&&this.y<rectBottom&&thisBottom>rect.y;};Rect.prototype.getMaximalFreeRects=function(rect){if(!this.overlaps(rect)){return false;}
var freeRects=[];var freeRect;var thisRight=this.x+this.width;var thisBottom=this.y+this.height;var rectRight=rect.x+rect.width;var rectBottom=rect.y+rect.height;if(this.y<rect.y){freeRect=new Rect({x:this.x,y:this.y,width:this.width,height:rect.y-this.y});freeRects.push(freeRect);}
if(thisRight>rectRight){freeRect=new Rect({x:rectRight,y:this.y,width:thisRight-rectRight,height:this.height});freeRects.push(freeRect);}
if(thisBottom>rectBottom){freeRect=new Rect({x:this.x,y:rectBottom,width:this.width,height:thisBottom-rectBottom});freeRects.push(freeRect);}
if(this.x<rect.x){freeRect=new Rect({x:this.x,y:this.y,width:rect.x-this.x,height:this.height});freeRects.push(freeRect);}
return freeRects;};Rect.prototype.canFit=function(rect){return this.width>=rect.width&&this.height>=rect.height;};return Rect;}
if(typeof define==='function'&&define.amd){define('packery/js/rect',rectDefinition);}else{window.Packery=window.Packery||{};window.Packery.Rect=rectDefinition();}})(window);(function(window){function packerDefinition(Rect){function Packer(width,height,sortDirection){this.width=width||0;this.height=height||0;this.sortDirection=sortDirection||'downwardLeftToRight';this.reset();}
Packer.prototype.reset=function(){this.spaces=[];this.newSpaces=[];var initialSpace=new Rect({x:0,y:0,width:this.width,height:this.height});this.spaces.push(initialSpace);this.sorter=sorters[this.sortDirection]||sorters.downwardLeftToRight;};Packer.prototype.pack=function(rect){for(var i=0,len=this.spaces.length;i<len;i++){var space=this.spaces[i];if(space.canFit(rect)){this.placeInSpace(rect,space);break;}}};Packer.prototype.placeInSpace=function(rect,space){rect.x=space.x;rect.y=space.y;this.placed(rect);};Packer.prototype.placed=function(rect){var revisedSpaces=[];for(var i=0,len=this.spaces.length;i<len;i++){var space=this.spaces[i];var newSpaces=space.getMaximalFreeRects(rect);if(newSpaces){revisedSpaces.push.apply(revisedSpaces,newSpaces);}else{revisedSpaces.push(space);}}
this.spaces=revisedSpaces;Packer.mergeRects(this.spaces);this.spaces.sort(this.sorter);};Packer.mergeRects=function(rects){for(var i=0,len=rects.length;i<len;i++){var rect=rects[i];if(!rect){continue;}
var compareRects=rects.slice(0);compareRects.splice(i,1);var removedCount=0;for(var j=0,jLen=compareRects.length;j<jLen;j++){var compareRect=compareRects[j];var indexAdjust=i>j?0:1;if(rect.contains(compareRect)){rects.splice(j+indexAdjust-removedCount,1);removedCount++;}}}
return rects;};var sorters={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x;},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y;}};return Packer;}
if(typeof define==='function'&&define.amd){define('packery/js/packer',['./rect'],packerDefinition);}else{var Packery=window.Packery=window.Packery||{};Packery.Packer=packerDefinition(Packery.Rect);}})(window);(function(window){function itemDefinition(getStyleProperty,Outlayer,Rect){var transformProperty=getStyleProperty('transform');var Item=function PackeryItem(){Outlayer.Item.apply(this,arguments);};Item.prototype=new Outlayer.Item();var protoCreate=Item.prototype._create;Item.prototype._create=function(){protoCreate.call(this);this.rect=new Rect();this.placeRect=new Rect();};Item.prototype.dragStart=function(){this.getPosition();this.removeTransitionStyles();if(this.isTransitioning&&transformProperty){this.element.style[transformProperty]='none';}
this.getSize();this.isPlacing=true;this.needsPositioning=false;this.positionPlaceRect(this.position.x,this.position.y);this.isTransitioning=false;this.didDrag=false;};Item.prototype.dragMove=function(x,y){this.didDrag=true;var packerySize=this.layout.size;x-=packerySize.paddingLeft;y-=packerySize.paddingTop;this.positionPlaceRect(x,y);};Item.prototype.dragStop=function(){this.getPosition();var isDiffX=this.position.x!==this.placeRect.x;var isDiffY=this.position.y!==this.placeRect.y;this.needsPositioning=isDiffX||isDiffY;this.didDrag=false;};Item.prototype.positionPlaceRect=function(x,y,isMaxYOpen){this.placeRect.x=this.getPlaceRectCoord(x,true);this.placeRect.y=this.getPlaceRectCoord(y,false,isMaxYOpen);};Item.prototype.getPlaceRectCoord=function(coord,isX,isMaxOpen){var measure=isX?'Width':'Height';var size=this.size['outer'+measure];var segment=this.layout[isX?'columnWidth':'rowHeight'];var parentSize=this.layout.size['inner'+measure];if(!isX){parentSize=Math.max(parentSize,this.layout.maxY);if(!this.layout.rowHeight){parentSize-=this.layout.gutter;}}
var max;if(segment){segment+=this.layout.gutter;parentSize+=isX?this.layout.gutter:0;coord=Math.round(coord/segment);var mathMethod;if(this.layout.options.isHorizontal){mathMethod=!isX?'floor':'ceil';}else{mathMethod=isX?'floor':'ceil';}
var maxSegments=Math[mathMethod](parentSize/segment);maxSegments-=Math.ceil(size/segment);max=maxSegments;}else{max=parentSize-size;}
coord=isMaxOpen?coord:Math.min(coord,max);coord*=segment||1;return Math.max(0,coord);};Item.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x;this.rect.y=this.placeRect.y;};return Item;}
if(typeof define==='function'&&define.amd){define('packery/js/item',['get-style-property/get-style-property','outlayer/outlayer','./rect'],itemDefinition);}else{window.Packery.Item=itemDefinition(window.getStyleProperty,window.Outlayer,window.Packery.Rect);}})(window);/*!
 * Packery v1.2.0
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2013 Metafizzy
 */(function(window){function packeryDefinition(classie,getSize,Outlayer,Rect,Packer,Item){var Packery=Outlayer.create('packery');Packery.Item=Packery.prototype.settings.item=Item;Packery.prototype._create=function(){Outlayer.prototype._create.call(this);this.packer=new Packer();this.stamp(this.options.stamped);var _this=this;this.handleDraggabilly={dragStart:function(draggie){_this.itemDragStart(draggie.element);},dragMove:function(draggie){_this.itemDragMove(draggie.element,draggie.position.x,draggie.position.y);},dragEnd:function(draggie){_this.itemDragEnd(draggie.element);}};this.handleUIDraggable={start:function handleUIDraggableStart(event){_this.itemDragStart(event.currentTarget);},drag:function handleUIDraggableDrag(event,ui){_this.itemDragMove(event.currentTarget,ui.position.left,ui.position.top);},stop:function handleUIDraggableStop(event){_this.itemDragEnd(event.currentTarget);}};};Packery.prototype._resetLayout=function(){this.getSize();this._getMeasurements();var packer=this.packer;if(this.options.isHorizontal){packer.width=Number.POSITIVE_INFINITY;packer.height=this.size.innerHeight+this.gutter;packer.sortDirection='rightwardTopToBottom';}else{packer.width=this.size.innerWidth+this.gutter;packer.height=Number.POSITIVE_INFINITY;packer.sortDirection='downwardLeftToRight';}
packer.reset();this.maxY=0;this.maxX=0;};Packery.prototype._getMeasurements=function(){this._getMeasurement('columnWidth','width');this._getMeasurement('rowHeight','height');this._getMeasurement('gutter','width');};Packery.prototype._getItemLayoutPosition=function(item){this._packItem(item);return item.rect;};Packery.prototype._packItem=function(item){this._setRectSize(item.element,item.rect);this.packer.pack(item.rect);this._setMaxXY(item.rect);};Packery.prototype._setMaxXY=function(rect){this.maxX=Math.max(rect.x+rect.width,this.maxX);this.maxY=Math.max(rect.y+rect.height,this.maxY);};Packery.prototype._setRectSize=function(elem,rect){var size=getSize(elem);var w=size.outerWidth;var h=size.outerHeight;var colW=this.columnWidth+this.gutter;var rowH=this.rowHeight+this.gutter;w=this.columnWidth?Math.ceil(w/colW)*colW:w+this.gutter;h=this.rowHeight?Math.ceil(h/rowH)*rowH:h+this.gutter;rect.width=Math.min(w,this.packer.width);rect.height=h;};Packery.prototype._getContainerSize=function(){if(this.options.isHorizontal){return{width:this.maxX-this.gutter};}else{return{height:this.maxY-this.gutter};}};Packery.prototype._manageStamp=function(elem){var item=this.getItem(elem);var rect;if(item&&item.isPlacing){rect=item.placeRect;}else{var offset=this._getElementOffset(elem);rect=new Rect({x:this.options.isOriginLeft?offset.left:offset.right,y:this.options.isOriginTop?offset.top:offset.bottom});}
this._setRectSize(elem,rect);this.packer.placed(rect);this._setMaxXY(rect);};Packery.prototype.sortItemsByPosition=function(){this.items.sort(function(a,b){return a.position.y-b.position.y||a.position.x-b.position.x;});};Packery.prototype.fit=function(elem,x,y){var item=this.getItem(elem);if(!item){return;}
this._getMeasurements();this.stamp(item.element);item.getSize();item.isPlacing=true;x=x===undefined?item.rect.x:x;y=y===undefined?item.rect.y:y;item.positionPlaceRect(x,y,true);this._bindFitEvents(item);item.moveTo(item.placeRect.x,item.placeRect.y);this.layout();this.unstamp(item.element);this.sortItemsByPosition();item.isPlacing=false;item.copyPlaceRectPosition();};Packery.prototype._bindFitEvents=function(item){var _this=this;var ticks=0;function tick(){ticks++;if(ticks!==2){return;}
_this.emitEvent('fitComplete',[_this,item]);}
item.on('layout',function(){tick();return true;});this.on('layoutComplete',function(){tick();return true;});};Packery.prototype.resize=function(){var size=getSize(this.element);var hasSizes=this.size&&size;var innerSize=this.options.isHorizontal?'innerHeight':'innerWidth';if(hasSizes&&size[innerSize]===this.size[innerSize]){return;}
this.layout();};Packery.prototype.itemDragStart=function(elem){this.stamp(elem);var item=this.getItem(elem);if(item){item.dragStart();}};Packery.prototype.itemDragMove=function(elem,x,y){var item=this.getItem(elem);if(item){item.dragMove(x,y);}
var _this=this;function delayed(){_this.layout();delete _this.dragTimeout;}
this.clearDragTimeout();this.dragTimeout=setTimeout(delayed,40);};Packery.prototype.clearDragTimeout=function(){if(this.dragTimeout){clearTimeout(this.dragTimeout);}};Packery.prototype.itemDragEnd=function(elem){var item=this.getItem(elem);var itemDidDrag;if(item){itemDidDrag=item.didDrag;item.dragStop();}
if(!item||(!itemDidDrag&&!item.needsPositioning)){this.unstamp(elem);return;}
classie.add(item.element,'is-positioning-post-drag');var onLayoutComplete=this._getDragEndLayoutComplete(elem,item);if(item.needsPositioning){item.on('layout',onLayoutComplete);item.moveTo(item.placeRect.x,item.placeRect.y);}else if(item){item.copyPlaceRectPosition();}
this.clearDragTimeout();this.on('layoutComplete',onLayoutComplete);this.layout();};Packery.prototype._getDragEndLayoutComplete=function(elem,item){var itemNeedsPositioning=item&&item.needsPositioning;var completeCount=0;var asyncCount=itemNeedsPositioning?2:1;var _this=this;return function onLayoutComplete(){completeCount++;if(completeCount!==asyncCount){return true;}
if(item){classie.remove(item.element,'is-positioning-post-drag');item.isPlacing=false;item.copyPlaceRectPosition();}
_this.unstamp(elem);_this.sortItemsByPosition();if(itemNeedsPositioning){_this.emitEvent('dragItemPositioned',[_this,item]);}
return true;};};Packery.prototype.bindDraggabillyEvents=function(draggie){draggie.on('dragStart',this.handleDraggabilly.dragStart);draggie.on('dragMove',this.handleDraggabilly.dragMove);draggie.on('dragEnd',this.handleDraggabilly.dragEnd);};Packery.prototype.bindUIDraggableEvents=function($elems){$elems.on('dragstart',this.handleUIDraggable.start).on('drag',this.handleUIDraggable.drag).on('dragstop',this.handleUIDraggable.stop);};Packery.Rect=Rect;Packery.Packer=Packer;return Packery;}
if(typeof define==='function'&&define.amd){define('packery/js/packery',['classie/classie','get-size/get-size','outlayer/outlayer','./rect','./packer','./item'],packeryDefinition);}else{window.Packery=packeryDefinition(window.classie,window.getSize,window.Outlayer,window.Packery.Rect,window.Packery.Packer,window.Packery.Item);}})(window);/*!
 * imagesLoaded v3.1.1
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(window){'use strict';var $=window.jQuery;var console=window.console;var hasConsole=typeof console!=='undefined';function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==='[object Array]';}
function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj;}else if(typeof obj.length==='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;}
function defineImagesLoaded(EventEmitter,eventie){function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options);}
if(typeof elem==='string'){elem=document.querySelectorAll(elem);}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options==='function'){onAlways=options;}else{extend(this.options,options);}
if(onAlways){this.on('always',onAlways);}
this.getImages();if($){this.jqDeferred=new $.Deferred();}
var _this=this;setTimeout(function(){_this.check();});}
ImagesLoaded.prototype=new EventEmitter();ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0,len=this.elements.length;i<len;i++){var elem=this.elements[i];if(elem.nodeName==='IMG'){this.addImage(elem);}
var childElems=elem.querySelectorAll('img');for(var j=0,jLen=childElems.length;j<jLen;j++){var img=childElems[j];this.addImage(img);}}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.check=function(){var _this=this;var checkedCount=0;var length=this.images.length;this.hasAnyBroken=false;if(!length){this.complete();return;}
function onConfirm(image,message){if(_this.options.debug&&hasConsole){console.log('confirm',image,message);}
_this.progress(image);checkedCount++;if(checkedCount===length){_this.complete();}
return true;}
for(var i=0;i<length;i++){var loadingImage=this.images[i];loadingImage.on('confirm',onConfirm);loadingImage.check();}};ImagesLoaded.prototype.progress=function(image){this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;var _this=this;setTimeout(function(){_this.emit('progress',_this,image);if(_this.jqDeferred){_this.jqDeferred.notify(_this,image);}});};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;var _this=this;setTimeout(function(){_this.emit(eventName,_this);_this.emit('always',_this);if(_this.jqDeferred){var jqMethod=_this.hasAnyBroken?'reject':'resolve';_this.jqDeferred[jqMethod](_this);}});};if($){$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};}
function LoadingImage(img){this.img=img;}
LoadingImage.prototype=new EventEmitter();LoadingImage.prototype.check=function(){var resource=cache[this.img.src]||new Resource(this.img.src);if(resource.isConfirmed){this.confirm(resource.isLoaded,'cached was confirmed');return;}
if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}
var _this=this;resource.on('confirm',function(resrc,message){_this.confirm(resrc.isLoaded,message);return true;});resource.check();};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emit('confirm',this,message);};var cache={};function Resource(src){this.src=src;cache[src]=this;}
Resource.prototype=new EventEmitter();Resource.prototype.check=function(){if(this.isChecked){return;}
var proxyImage=new Image();eventie.bind(proxyImage,'load',this);eventie.bind(proxyImage,'error',this);proxyImage.src=this.src;this.isChecked=true;};Resource.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Resource.prototype.onload=function(event){this.confirm(true,'onload');this.unbindProxyEvents(event);};Resource.prototype.onerror=function(event){this.confirm(false,'onerror');this.unbindProxyEvents(event);};Resource.prototype.confirm=function(isLoaded,message){this.isConfirmed=true;this.isLoaded=isLoaded;this.emit('confirm',this,message);};Resource.prototype.unbindProxyEvents=function(event){eventie.unbind(event.target,'load',this);eventie.unbind(event.target,'error',this);};return ImagesLoaded;}
if(typeof define==='function'&&define.amd){define(['eventEmitter/EventEmitter','eventie/eventie'],defineImagesLoaded);}else{window.imagesLoaded=defineImagesLoaded(window.EventEmitter,window.eventie);}})(window);(function(global){'use strict';window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.update.bind(this));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function Headroom(elem,options){options=options||Headroom.options;this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;}
Headroom.prototype={constructor:Headroom,init:function(){this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);},destroy:function(){this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);this.elem.classList.remove(this.classes.unpinned,this.classes.pinned,this.classes.initial);},attachEvent:function(){if(!this.initialised){this.initialised=true;window.addEventListener('scroll',this.debouncer,false);}},unpin:function(){this.elem.classList.add(this.classes.unpinned);this.elem.classList.remove(this.classes.pinned);},pin:function(){this.elem.classList.remove(this.classes.unpinned);this.elem.classList.add(this.classes.pinned);},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;if(currentScrollY<0){return;}
if(toleranceExceeded){if(currentScrollY>this.lastKnownScrollY&&currentScrollY>=this.offset){this.unpin();}
else if(currentScrollY<this.lastKnownScrollY){this.pin();}}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'headroom--pinned',unpinned:'headroom--unpinned',initial:'headroom'}};global.Headroom=Headroom;}(this));function tlite(getTooltipOpts){document.addEventListener('mouseover',function(e){var el=e.target;var opts=getTooltipOpts(el);if(!opts){el=el.parentElement;opts=el&&getTooltipOpts(el);}
opts&&tlite.show(el,opts,true);});}
tlite.show=function(el,opts,isAuto){opts=opts||{};(el.tooltip||Tooltip(el,opts)).show();function Tooltip(el,opts){var tooltipEl;var showTimer;var text;el.addEventListener('mousedown',autoHide);el.addEventListener('mouseleave',autoHide);function show(){text=el.title||text;el.title='';text&&!showTimer&&(showTimer=setTimeout(fadeIn,isAuto?150:1))}
function autoHide(){tlite.hide(el,true);}
function hide(isAutoHiding){if(isAuto===isAutoHiding){showTimer=clearTimeout(showTimer);tooltipEl&&el.removeChild(tooltipEl);tooltipEl=undefined;}}
function fadeIn(){if(!tooltipEl){tooltipEl=createTooltip(el,text,opts);}}
return el.tooltip={show:show,hide:hide};}
function createTooltip(el,text,opts){var tooltipEl=document.createElement('span');var grav=opts.grav||'n';tooltipEl.className='tlite '+(grav?'tlite-'+grav:'');tooltipEl.innerHTML=text;el.appendChild(tooltipEl);var arrowSize=10;var top=el.offsetTop;var left=el.offsetLeft;if(tooltipEl.offsetParent===el){top=left=0;}
var width=el.offsetWidth;var height=el.offsetHeight;var tooltipHeight=tooltipEl.offsetHeight;var tooltipWidth=tooltipEl.offsetWidth;var centerEl=left+(width/2);var vertGrav=grav[0];var horzGrav=grav[1];tooltipEl.style.top=(vertGrav==='s'?(top-tooltipHeight-arrowSize):vertGrav==='n'?(top+height+arrowSize):(top+(height/2)-(tooltipHeight/2)))+'px';tooltipEl.style.left=(horzGrav==='w'?left:horzGrav==='e'?left+width-tooltipWidth:vertGrav==='w'?(left+width+arrowSize):vertGrav==='e'?(left-tooltipWidth-arrowSize):(centerEl-tooltipWidth/2))+'px';tooltipEl.className+=' tlite-visible';return tooltipEl;}};tlite.hide=function(el,isAuto){el.tooltip&&el.tooltip.hide(isAuto);};if(typeof module!=='undefined'&&module.exports){module.exports=tlite;}/*! http://mths.be/placeholder v2.0.7 by @mathias */;(function(window,document,$){var isInputSupported='placeholder'in document.createElement('input');var isTextareaSupported='placeholder'in document.createElement('textarea');var prototype=$.fn;var valHooks=$.valHooks;var propHooks=$.propHooks;var hooks;var placeholder;if(isInputSupported&&isTextareaSupported){placeholder=prototype.placeholder=function(){return this;};placeholder.input=placeholder.textarea=true;}else{placeholder=prototype.placeholder=function(){var $this=this;$this.filter((isInputSupported?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':clearPlaceholder,'blur.placeholder':setPlaceholder}).data('placeholder-enabled',true).trigger('blur.placeholder');return $this;};placeholder.input=isInputSupported;placeholder.textarea=isTextareaSupported;hooks={'get':function(element){var $element=$(element);var $passwordInput=$element.data('placeholder-password');if($passwordInput){return $passwordInput[0].value;}
return $element.data('placeholder-enabled')&&$element.hasClass('placeholder')?'':element.value;},'set':function(element,value){var $element=$(element);var $passwordInput=$element.data('placeholder-password');if($passwordInput){return $passwordInput[0].value=value;}
if(!$element.data('placeholder-enabled')){return element.value=value;}
if(value==''){element.value=value;if(element!=safeActiveElement()){setPlaceholder.call(element);}}else if($element.hasClass('placeholder')){clearPlaceholder.call(element,true,value)||(element.value=value);}else{element.value=value;}
return $element;}};if(!isInputSupported){valHooks.input=hooks;propHooks.value=hooks;}
if(!isTextareaSupported){valHooks.textarea=hooks;propHooks.value=hooks;}
$(function(){$(document).delegate('form','submit.placeholder',function(){var $inputs=$('.placeholder',this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder);},10);});});$(window).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value='';});});}
function args(elem){var newAttrs={};var rinlinejQuery=/^jQuery\d+$/;$.each(elem.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){newAttrs[attr.name]=attr.value;}});return newAttrs;}
function clearPlaceholder(event,value){var input=this;var $input=$(input);if(input.value==$input.attr('placeholder')&&$input.hasClass('placeholder')){if($input.data('placeholder-password')){$input=$input.hide().next().show().attr('id',$input.removeAttr('id').data('placeholder-id'));if(event===true){return $input[0].value=value;}
$input.focus();}else{input.value='';$input.removeClass('placeholder');input==safeActiveElement()&&input.select();}}}
function setPlaceholder(){var $replacement;var input=this;var $input=$(input);var id=this.id;if(input.value==''){if(input.type=='password'){if(!$input.data('placeholder-textinput')){try{$replacement=$input.clone().attr({'type':'text'});}catch(e){$replacement=$('<input>').attr($.extend(args(this),{'type':'text'}));}
$replacement.removeAttr('name').data({'placeholder-password':$input,'placeholder-id':id}).bind('focus.placeholder',clearPlaceholder);$input.data({'placeholder-textinput':$replacement,'placeholder-id':id}).before($replacement);}
$input=$input.removeAttr('id').hide().prev().attr('id',id).show();}
$input.addClass('placeholder');$input[0].value=$input.attr('placeholder');}else{$input.removeClass('placeholder');}}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}}(this,document,jQuery));/*! jQuery plugin for Hammer.JS - v1.0.1 - 2014-02-03
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license *//*! Hammer.JS - v1.0.6 - 2014-01-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */(function(window,undefined){'use strict';var Hammer=function(element,options){return new Hammer.Instance(element,options||{});};Hammer.defaults={stop_browser_behavior:{userSelect:'none',touchAction:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};Hammer.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled;Hammer.HAS_TOUCHEVENTS=('ontouchstart'in window);Hammer.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i;Hammer.NO_MOUSEEVENTS=Hammer.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(Hammer.MOBILE_REGEX);Hammer.EVENT_TYPES={};Hammer.DIRECTION_DOWN='down';Hammer.DIRECTION_LEFT='left';Hammer.DIRECTION_UP='up';Hammer.DIRECTION_RIGHT='right';Hammer.POINTER_MOUSE='mouse';Hammer.POINTER_TOUCH='touch';Hammer.POINTER_PEN='pen';Hammer.EVENT_START='start';Hammer.EVENT_MOVE='move';Hammer.EVENT_END='end';Hammer.DOCUMENT=window.document;Hammer.plugins=Hammer.plugins||{};Hammer.gestures=Hammer.gestures||{};Hammer.READY=false;function setup(){if(Hammer.READY){return;}
Hammer.event.determineEventTypes();Hammer.utils.each(Hammer.gestures,function(gesture){Hammer.detection.register(gesture);});Hammer.event.onTouch(Hammer.DOCUMENT,Hammer.EVENT_MOVE,Hammer.detection.detect);Hammer.event.onTouch(Hammer.DOCUMENT,Hammer.EVENT_END,Hammer.detection.detect);Hammer.READY=true;}
Hammer.utils={extend:function extend(dest,src,merge){for(var key in src){if(dest[key]!==undefined&&merge){continue;}
dest[key]=src[key];}
return dest;},each:function(obj,iterator,context){var i,length;if('forEach'in obj){obj.forEach(iterator,context);}
else if(obj.length!==undefined){for(i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===false){return;}}}
else{for(i in obj){if(obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)===false){return;}}}},hasParent:function(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;},getCenter:function getCenter(touches){var valuesX=[],valuesY=[];Hammer.utils.each(touches,function(touch){valuesX.push(typeof touch.clientX!=='undefined'?touch.clientX:touch.pageX);valuesY.push(typeof touch.clientY!=='undefined'?touch.clientY:touch.pageY);});return{pageX:((Math.min.apply(Math,valuesX)+Math.max.apply(Math,valuesX))/2),pageY:((Math.min.apply(Math,valuesY)+Math.max.apply(Math,valuesY))/2)};},getVelocity:function getVelocity(delta_time,delta_x,delta_y){return{x:Math.abs(delta_x/delta_time)||0,y:Math.abs(delta_y/delta_time)||0};},getAngle:function getAngle(touch1,touch2){var y=touch2.pageY-touch1.pageY,x=touch2.pageX-touch1.pageX;return Math.atan2(y,x)*180/Math.PI;},getDirection:function getDirection(touch1,touch2){var x=Math.abs(touch1.pageX-touch2.pageX),y=Math.abs(touch1.pageY-touch2.pageY);if(x>=y){return touch1.pageX-touch2.pageX>0?Hammer.DIRECTION_LEFT:Hammer.DIRECTION_RIGHT;}
else{return touch1.pageY-touch2.pageY>0?Hammer.DIRECTION_UP:Hammer.DIRECTION_DOWN;}},getDistance:function getDistance(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt((x*x)+(y*y));},getScale:function getScale(start,end){if(start.length>=2&&end.length>=2){return this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]);}
return 1;},getRotation:function getRotation(start,end){if(start.length>=2&&end.length>=2){return this.getAngle(end[1],end[0])-
this.getAngle(start[1],start[0]);}
return 0;},isVertical:function isVertical(direction){return(direction==Hammer.DIRECTION_UP||direction==Hammer.DIRECTION_DOWN);},stopDefaultBrowserBehavior:function stopDefaultBrowserBehavior(element,css_props){if(!css_props||!element||!element.style){return;}
Hammer.utils.each(['webkit','khtml','moz','Moz','ms','o',''],function(vendor){Hammer.utils.each(css_props,function(prop){if(vendor){prop=vendor+prop.substring(0,1).toUpperCase()+prop.substring(1);}
if(prop in element.style){element.style[prop]=prop;}});});if(css_props.userSelect=='none'){element.onselectstart=function(){return false;};}
if(css_props.userDrag=='none'){element.ondragstart=function(){return false;};}}};Hammer.Instance=function(element,options){var self=this;setup();this.element=element;this.enabled=true;this.options=Hammer.utils.extend(Hammer.utils.extend({},Hammer.defaults),options||{});if(this.options.stop_browser_behavior){Hammer.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior);}
Hammer.event.onTouch(element,Hammer.EVENT_START,function(ev){if(self.enabled){Hammer.detection.startDetect(self,ev);}});return this;};Hammer.Instance.prototype={on:function onEvent(gesture,handler){var gestures=gesture.split(' ');Hammer.utils.each(gestures,function(gesture){this.element.addEventListener(gesture,handler,false);},this);return this;},off:function offEvent(gesture,handler){var gestures=gesture.split(' ');Hammer.utils.each(gestures,function(gesture){this.element.removeEventListener(gesture,handler,false);},this);return this;},trigger:function triggerEvent(gesture,eventData){if(!eventData){eventData={};}
var event=Hammer.DOCUMENT.createEvent('Event');event.initEvent(gesture,true,true);event.gesture=eventData;var element=this.element;if(Hammer.utils.hasParent(eventData.target,element)){element=eventData.target;}
element.dispatchEvent(event);return this;},enable:function enable(state){this.enabled=state;return this;}};var last_move_event=null;var enable_detect=false;var touch_triggered=false;Hammer.event={bindDom:function(element,type,handler){var types=type.split(' ');Hammer.utils.each(types,function(type){element.addEventListener(type,handler,false);});},onTouch:function onTouch(element,eventType,handler){var self=this;this.bindDom(element,Hammer.EVENT_TYPES[eventType],function bindDomOnTouch(ev){var sourceEventType=ev.type.toLowerCase();if(sourceEventType.match(/mouse/)&&touch_triggered){return;}
else if(sourceEventType.match(/touch/)||sourceEventType.match(/pointerdown/)||(sourceEventType.match(/mouse/)&&ev.which===1)){enable_detect=true;}
else if(sourceEventType.match(/mouse/)&&!ev.which){enable_detect=false;}
if(sourceEventType.match(/touch|pointer/)){touch_triggered=true;}
var count_touches=0;if(enable_detect){if(Hammer.HAS_POINTEREVENTS&&eventType!=Hammer.EVENT_END){count_touches=Hammer.PointerEvent.updatePointer(eventType,ev);}
else if(sourceEventType.match(/touch/)){count_touches=ev.touches.length;}
else if(!touch_triggered){count_touches=sourceEventType.match(/up/)?0:1;}
if(count_touches>0&&eventType==Hammer.EVENT_END){eventType=Hammer.EVENT_MOVE;}
else if(!count_touches){eventType=Hammer.EVENT_END;}
if(count_touches||last_move_event===null){last_move_event=ev;}
handler.call(Hammer.detection,self.collectEventData(element,eventType,self.getTouchList(last_move_event,eventType),ev));if(Hammer.HAS_POINTEREVENTS&&eventType==Hammer.EVENT_END){count_touches=Hammer.PointerEvent.updatePointer(eventType,ev);}}
if(!count_touches){last_move_event=null;enable_detect=false;touch_triggered=false;Hammer.PointerEvent.reset();}});},determineEventTypes:function determineEventTypes(){var types;if(Hammer.HAS_POINTEREVENTS){types=Hammer.PointerEvent.getEvents();}
else if(Hammer.NO_MOUSEEVENTS){types=['touchstart','touchmove','touchend touchcancel'];}
else{types=['touchstart mousedown','touchmove mousemove','touchend touchcancel mouseup'];}
Hammer.EVENT_TYPES[Hammer.EVENT_START]=types[0];Hammer.EVENT_TYPES[Hammer.EVENT_MOVE]=types[1];Hammer.EVENT_TYPES[Hammer.EVENT_END]=types[2];},getTouchList:function getTouchList(ev){if(Hammer.HAS_POINTEREVENTS){return Hammer.PointerEvent.getTouchList();}
else if(ev.touches){return ev.touches;}
else{ev.identifier=1;return[ev];}},collectEventData:function collectEventData(element,eventType,touches,ev){var pointerType=Hammer.POINTER_TOUCH;if(ev.type.match(/mouse/)||Hammer.PointerEvent.matchType(Hammer.POINTER_MOUSE,ev)){pointerType=Hammer.POINTER_MOUSE;}
return{center:Hammer.utils.getCenter(touches),timeStamp:new Date().getTime(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation();}
if(this.srcEvent.preventDefault){this.srcEvent.preventDefault();}},stopPropagation:function(){this.srcEvent.stopPropagation();},stopDetect:function(){return Hammer.detection.stopDetect();}};}};Hammer.PointerEvent={pointers:{},getTouchList:function(){var self=this;var touchlist=[];Hammer.utils.each(self.pointers,function(pointer){touchlist.push(pointer);});return touchlist;},updatePointer:function(type,pointerEvent){if(type==Hammer.EVENT_END){this.pointers={};}
else{pointerEvent.identifier=pointerEvent.pointerId;this.pointers[pointerEvent.pointerId]=pointerEvent;}
return Object.keys(this.pointers).length;},matchType:function(pointerType,ev){if(!ev.pointerType){return false;}
var pt=ev.pointerType,types={};types[Hammer.POINTER_MOUSE]=(pt===ev.MSPOINTER_TYPE_MOUSE||pt===Hammer.POINTER_MOUSE);types[Hammer.POINTER_TOUCH]=(pt===ev.MSPOINTER_TYPE_TOUCH||pt===Hammer.POINTER_TOUCH);types[Hammer.POINTER_PEN]=(pt===ev.MSPOINTER_TYPE_PEN||pt===Hammer.POINTER_PEN);return types[pointerType];},getEvents:function(){return['pointerdown MSPointerDown','pointermove MSPointerMove','pointerup pointercancel MSPointerUp MSPointerCancel'];},reset:function(){this.pointers={};}};Hammer.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function startDetect(inst,eventData){if(this.current){return;}
this.stopped=false;this.current={inst:inst,startEvent:Hammer.utils.extend({},eventData),lastEvent:false,name:''};this.detect(eventData);},detect:function detect(eventData){if(!this.current||this.stopped){return;}
eventData=this.extendEventData(eventData);var inst_options=this.current.inst.options;Hammer.utils.each(this.gestures,function(gesture){if(!this.stopped&&inst_options[gesture.name]!==false){if(gesture.handler.call(gesture,eventData,this.current.inst)===false){this.stopDetect();return false;}}},this);if(this.current){this.current.lastEvent=eventData;}
if(eventData.eventType==Hammer.EVENT_END&&!eventData.touches.length-1){this.stopDetect();}
return eventData;},stopDetect:function stopDetect(){this.previous=Hammer.utils.extend({},this.current);this.current=null;this.stopped=true;},extendEventData:function extendEventData(ev){var startEv=this.current.startEvent;if(startEv&&(ev.touches.length!=startEv.touches.length||ev.touches===startEv.touches)){startEv.touches=[];Hammer.utils.each(ev.touches,function(touch){startEv.touches.push(Hammer.utils.extend({},touch));});}
var delta_time=ev.timeStamp-startEv.timeStamp,delta_x=ev.center.pageX-startEv.center.pageX,delta_y=ev.center.pageY-startEv.center.pageY,velocity=Hammer.utils.getVelocity(delta_time,delta_x,delta_y),interimAngle,interimDirection;if(ev.eventType==='end'){interimAngle=this.current.lastEvent&&this.current.lastEvent.interimAngle;interimDirection=this.current.lastEvent&&this.current.lastEvent.interimDirection;}
else{interimAngle=this.current.lastEvent&&Hammer.utils.getAngle(this.current.lastEvent.center,ev.center);interimDirection=this.current.lastEvent&&Hammer.utils.getDirection(this.current.lastEvent.center,ev.center);}
Hammer.utils.extend(ev,{deltaTime:delta_time,deltaX:delta_x,deltaY:delta_y,velocityX:velocity.x,velocityY:velocity.y,distance:Hammer.utils.getDistance(startEv.center,ev.center),angle:Hammer.utils.getAngle(startEv.center,ev.center),interimAngle:interimAngle,direction:Hammer.utils.getDirection(startEv.center,ev.center),interimDirection:interimDirection,scale:Hammer.utils.getScale(startEv.touches,ev.touches),rotation:Hammer.utils.getRotation(startEv.touches,ev.touches),startEvent:startEv});return ev;},register:function register(gesture){var options=gesture.defaults||{};if(options[gesture.name]===undefined){options[gesture.name]=true;}
Hammer.utils.extend(Hammer.defaults,options,true);gesture.index=gesture.index||1000;this.gestures.push(gesture);this.gestures.sort(function(a,b){if(a.index<b.index){return-1;}
if(a.index>b.index){return 1;}
return 0;});return this.gestures;}};Hammer.gestures.Drag={name:'drag',index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:true,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false,drag_lock_min_distance:25},triggered:false,handler:function dragGesture(ev,inst){if(Hammer.detection.current.name!=this.name&&this.triggered){inst.trigger(this.name+'end',ev);this.triggered=false;return;}
if(inst.options.drag_max_touches>0&&ev.touches.length>inst.options.drag_max_touches){return;}
switch(ev.eventType){case Hammer.EVENT_START:this.triggered=false;break;case Hammer.EVENT_MOVE:if(ev.distance<inst.options.drag_min_distance&&Hammer.detection.current.name!=this.name){return;}
if(Hammer.detection.current.name!=this.name){Hammer.detection.current.name=this.name;if(inst.options.correct_for_drag_min_distance&&ev.distance>0){var factor=Math.abs(inst.options.drag_min_distance/ev.distance);Hammer.detection.current.startEvent.center.pageX+=ev.deltaX*factor;Hammer.detection.current.startEvent.center.pageY+=ev.deltaY*factor;ev=Hammer.detection.extendEventData(ev);}}
if(Hammer.detection.current.lastEvent.drag_locked_to_axis||(inst.options.drag_lock_to_axis&&inst.options.drag_lock_min_distance<=ev.distance)){ev.drag_locked_to_axis=true;}
var last_direction=Hammer.detection.current.lastEvent.direction;if(ev.drag_locked_to_axis&&last_direction!==ev.direction){if(Hammer.utils.isVertical(last_direction)){ev.direction=(ev.deltaY<0)?Hammer.DIRECTION_UP:Hammer.DIRECTION_DOWN;}
else{ev.direction=(ev.deltaX<0)?Hammer.DIRECTION_LEFT:Hammer.DIRECTION_RIGHT;}}
if(!this.triggered){inst.trigger(this.name+'start',ev);this.triggered=true;}
inst.trigger(this.name,ev);inst.trigger(this.name+ev.direction,ev);if((inst.options.drag_block_vertical&&Hammer.utils.isVertical(ev.direction))||(inst.options.drag_block_horizontal&&!Hammer.utils.isVertical(ev.direction))){ev.preventDefault();}
break;case Hammer.EVENT_END:if(this.triggered){inst.trigger(this.name+'end',ev);}
this.triggered=false;break;}}};Hammer.gestures.Hold={name:'hold',index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function holdGesture(ev,inst){switch(ev.eventType){case Hammer.EVENT_START:clearTimeout(this.timer);Hammer.detection.current.name=this.name;this.timer=setTimeout(function(){if(Hammer.detection.current.name=='hold'){inst.trigger('hold',ev);}},inst.options.hold_timeout);break;case Hammer.EVENT_MOVE:if(ev.distance>inst.options.hold_threshold){clearTimeout(this.timer);}
break;case Hammer.EVENT_END:clearTimeout(this.timer);break;}}};Hammer.gestures.Release={name:'release',index:Infinity,handler:function releaseGesture(ev,inst){if(ev.eventType==Hammer.EVENT_END){inst.trigger(this.name,ev);}}};Hammer.gestures.Swipe={name:'swipe',index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:0.7},handler:function swipeGesture(ev,inst){if(ev.eventType==Hammer.EVENT_END){if(inst.options.swipe_max_touches>0&&ev.touches.length<inst.options.swipe_min_touches&&ev.touches.length>inst.options.swipe_max_touches){return;}
if(ev.velocityX>inst.options.swipe_velocity||ev.velocityY>inst.options.swipe_velocity){inst.trigger(this.name,ev);inst.trigger(this.name+ev.direction,ev);}}}};Hammer.gestures.Tap={name:'tap',index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:true,doubletap_distance:20,doubletap_interval:300},handler:function tapGesture(ev,inst){if(ev.eventType==Hammer.EVENT_END&&ev.srcEvent.type!='touchcancel'){var prev=Hammer.detection.previous,did_doubletap=false;if(ev.deltaTime>inst.options.tap_max_touchtime||ev.distance>inst.options.tap_max_distance){return;}
if(prev&&prev.name=='tap'&&(ev.timeStamp-prev.lastEvent.timeStamp)<inst.options.doubletap_interval&&ev.distance<inst.options.doubletap_distance){inst.trigger('doubletap',ev);did_doubletap=true;}
if(!did_doubletap||inst.options.tap_always){Hammer.detection.current.name='tap';inst.trigger(Hammer.detection.current.name,ev);}}}};Hammer.gestures.Touch={name:'touch',index:-Infinity,defaults:{prevent_default:false,prevent_mouseevents:false},handler:function touchGesture(ev,inst){if(inst.options.prevent_mouseevents&&ev.pointerType==Hammer.POINTER_MOUSE){ev.stopDetect();return;}
if(inst.options.prevent_default){ev.preventDefault();}
if(ev.eventType==Hammer.EVENT_START){inst.trigger(this.name,ev);}}};Hammer.gestures.Transform={name:'transform',index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:false},triggered:false,handler:function transformGesture(ev,inst){if(Hammer.detection.current.name!=this.name&&this.triggered){inst.trigger(this.name+'end',ev);this.triggered=false;return;}
if(ev.touches.length<2){return;}
if(inst.options.transform_always_block){ev.preventDefault();}
switch(ev.eventType){case Hammer.EVENT_START:this.triggered=false;break;case Hammer.EVENT_MOVE:var scale_threshold=Math.abs(1-ev.scale);var rotation_threshold=Math.abs(ev.rotation);if(scale_threshold<inst.options.transform_min_scale&&rotation_threshold<inst.options.transform_min_rotation){return;}
Hammer.detection.current.name=this.name;if(!this.triggered){inst.trigger(this.name+'start',ev);this.triggered=true;}
inst.trigger(this.name,ev);if(rotation_threshold>inst.options.transform_min_rotation){inst.trigger('rotate',ev);}
if(scale_threshold>inst.options.transform_min_scale){inst.trigger('pinch',ev);inst.trigger('pinch'+((ev.scale<1)?'in':'out'),ev);}
break;case Hammer.EVENT_END:if(this.triggered){inst.trigger(this.name+'end',ev);}
this.triggered=false;break;}}};if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){define(function(){return Hammer;});}
else if(typeof module==='object'&&typeof module.exports==='object'){module.exports=Hammer;}
else{window.Hammer=Hammer;}})(this);/*! jQuery plugin for Hammer.JS - v1.0.1 - 2014-02-03
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */(function(window,undefined){'use strict';function setup(Hammer,$){Hammer.event.bindDom=function(element,eventTypes,handler){$(element).on(eventTypes,function(ev){var data=ev.originalEvent||ev;if(data.pageX===undefined){data.pageX=ev.pageX;data.pageY=ev.pageY;}
if(!data.target){data.target=ev.target;}
if(data.which===undefined){data.which=data.button;}
if(!data.preventDefault){data.preventDefault=ev.preventDefault;}
if(!data.stopPropagation){data.stopPropagation=ev.stopPropagation;}
handler.call(this,data);});};Hammer.Instance.prototype.on=function(types,handler){return $(this.element).on(types,handler);};Hammer.Instance.prototype.off=function(types,handler){return $(this.element).off(types,handler);};Hammer.Instance.prototype.trigger=function(gesture,eventData){var el=$(this.element);if(el.has(eventData.target).length){el=$(eventData.target);}
return el.trigger({type:gesture,gesture:eventData});};$.fn.hammer=function(options){return this.each(function(){var el=$(this);var inst=el.data('hammer');if(!inst){el.data('hammer',new Hammer(this,options||{}));}
else if(inst&&options){Hammer.utils.extend(inst.options,options);}});};}
if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){define(['hammerjs','jquery'],setup);}
else{setup(window.Hammer,window.jQuery||window.Zepto);}})(this);/*! Picturefill - Responsive Images that work today. (and mimic the proposed Picture element with span elements). Author: Scott Jehl, Filament Group, 2012 | License: MIT/GPLv2 */(function(w){"use strict";w.picturefill=function(){var ps=w.document.getElementsByTagName("span");for(var i=0,il=ps.length;i<il;i++){if(ps[i].getAttribute("data-picture")!==null){var sources=ps[i].getElementsByTagName("span"),matches=[];for(var j=0,jl=sources.length;j<jl;j++){var media=sources[j].getAttribute("data-media");if(!media||(w.matchMedia&&w.matchMedia(media).matches)){matches.push(sources[j]);}}
var picImg=ps[i].getElementsByTagName("img")[0];if(matches.length){var matchedEl=matches.pop();if(!picImg||picImg.parentNode.nodeName==="NOSCRIPT"){picImg=w.document.createElement("img");picImg.alt=ps[i].getAttribute("data-alt");}
else if(matchedEl===picImg.parentNode){continue;}
picImg.src=matchedEl.getAttribute("data-src");matchedEl.appendChild(picImg);picImg.removeAttribute("width");picImg.removeAttribute("height");}
else if(picImg){picImg.parentNode.removeChild(picImg);}}}};if(w.addEventListener){w.addEventListener("resize",w.picturefill,false);w.addEventListener("DOMContentLoaded",function(){w.picturefill();w.removeEventListener("load",w.picturefill,false);},false);w.addEventListener("load",w.picturefill,false);}
else if(w.attachEvent){w.attachEvent("onload",w.picturefill);}}(this));jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};(function($){$.cookieCuttr=function(options){var defaults={cookieCutter:false,cookieCutterDeclineOnly:false,cookieAnalytics:true,cookieDeclineButton:false,cookieAcceptButton:true,cookieResetButton:false,cookieOverlayEnabled:false,cookiePolicyLink:'/privacy-policy/',cookieMessage:'We use cookies on this website, you can <a href="{{cookiePolicyLink}}" title="read about our cookies">read about them here</a>. To use the website as intended please...',cookieAnalyticsMessage:'We use cookies, just to track visits to our website, we store no personal details.',cookieErrorMessage:"We\'re sorry, this feature places cookies in your browser and has been disabled. <br>To continue using this functionality, please",cookieWhatAreTheyLink:"http://www.allaboutcookies.org/",cookieDisable:'',cookieExpires:365,cookieAcceptButtonText:"ACCEPT COOKIES",cookieDeclineButtonText:"DECLINE COOKIES",cookieResetButtonText:"RESET COOKIES FOR THIS WEBSITE",cookieWhatAreLinkText:"What are cookies?",cookieNotificationLocationBottom:false,cookiePolicyPage:false,cookiePolicyPageMessage:'Please read the information below and then choose from the following options',cookieDiscreetLink:false,cookieDiscreetReset:false,cookieDiscreetLinkText:"Cookies?",cookieDiscreetPosition:"topleft",cookieNoMessage:false,cookieDomain:"",cookieSubDomains:false};var options=$.extend(defaults,options);var message=defaults.cookieMessage.replace('{{cookiePolicyLink}}',defaults.cookiePolicyLink);defaults.cookieMessage='We use cookies on this website, you can <a href="'+defaults.cookiePolicyLink+'" title="read about our cookies">read about them here</a>. To use the website as intended please...';var cookiePolicyLinkIn=options.cookiePolicyLink;var cookieCutter=options.cookieCutter;var cookieCutterDeclineOnly=options.cookieCutterDeclineOnly;var cookieAnalytics=options.cookieAnalytics;var cookieDeclineButton=options.cookieDeclineButton;var cookieAcceptButton=options.cookieAcceptButton;var cookieResetButton=options.cookieResetButton;var cookieOverlayEnabled=options.cookieOverlayEnabled;var cookiePolicyLink=options.cookiePolicyLink;var cookieMessage=message;var cookieAnalyticsMessage=options.cookieAnalyticsMessage;var cookieErrorMessage=options.cookieErrorMessage;var cookieDisable=options.cookieDisable;var cookieWhatAreTheyLink=options.cookieWhatAreTheyLink;var cookieExpires=options.cookieExpires;var cookieAcceptButtonText=options.cookieAcceptButtonText;var cookieDeclineButtonText=options.cookieDeclineButtonText;var cookieResetButtonText=options.cookieResetButtonText;var cookieWhatAreLinkText=options.cookieWhatAreLinkText;var cookieNotificationLocationBottom=options.cookieNotificationLocationBottom;var cookiePolicyPage=options.cookiePolicyPage;var cookiePolicyPageMessage=options.cookiePolicyPageMessage;var cookieDiscreetLink=options.cookieDiscreetLink;var cookieDiscreetReset=options.cookieDiscreetReset;var cookieDiscreetLinkText=options.cookieDiscreetLinkText;var cookieDiscreetPosition=options.cookieDiscreetPosition;var cookieNoMessage=options.cookieNoMessage;var cookieSubDomains=options.cookieSubDomains;var $cookieAccepted=$.cookie('cc_cookie_accept')=="cc_cookie_accept";$.cookieAccepted=function(){return $cookieAccepted;};var $cookieDeclined=$.cookie('cc_cookie_decline')=="cc_cookie_decline";$.cookieDeclined=function(){return $cookieDeclined;};if(cookieAcceptButton){var cookieAccept=' <a href="#accept" class="cc-cookie-accept">'+cookieAcceptButtonText+'</a> ';cookieMessage=cookieMessage.replace('{{cookieAcceptButton}}',cookieAccept);}else{var cookieAccept="";}
if(cookieDeclineButton){var cookieDecline=' <a href="#decline" class="cc-cookie-decline">'+cookieDeclineButtonText+'</a> ';}else{var cookieDecline="";}
if(cookieOverlayEnabled){var cookieOverlay='cc-overlay';}else{var cookieOverlay="";}
if((cookieNotificationLocationBottom)||(cookieDiscreetPosition=="bottomright")||(cookieDiscreetPosition=="bottomleft")){var appOrPre=true;}else{var appOrPre=false;}
if(($cookieAccepted)||($cookieDeclined)){if((cookieResetButton)&&(cookieDiscreetReset)){if(appOrPre){$('body').append('<div class="cc-cookies cc-discreet"><a class="cc-cookie-reset" href="#" title="'+cookieResetButtonText+'">'+cookieResetButtonText+'</a></div>');}else{$('body').prepend('<div class="cc-cookies cc-discreet"><a class="cc-cookie-reset" href="#" title="'+cookieResetButtonText+'">'+cookieResetButtonText+'</a></div>');}
if(cookieDiscreetPosition=="topleft"){$('div.cc-cookies').css("top","0");$('div.cc-cookies').css("left","0");}
if(cookieDiscreetPosition=="topright"){$('div.cc-cookies').css("top","0");$('div.cc-cookies').css("right","0");}
if(cookieDiscreetPosition=="bottomleft"){$('div.cc-cookies').css("bottom","0");$('div.cc-cookies').css("left","0");}
if(cookieDiscreetPosition=="bottomright"){$('div.cc-cookies').css("bottom","0");$('div.cc-cookies').css("right","0");}}else if(cookieResetButton){if(appOrPre){$('body').append('<div class="cc-cookies"><a href="#" class="cc-cookie-reset">'+cookieResetButtonText+'</a></div>');}else{$('body').prepend('<div class="cc-cookies"><a href="#" class="cc-cookie-reset">'+cookieResetButtonText+'</a></div>');}}else{var cookieResetButton="";}}else{if((cookieNoMessage)&&(!cookiePolicyPage)){}else if((cookieDiscreetLink)&&(!cookiePolicyPage)){if(appOrPre){$('body').append('<div class="cc-cookies cc-discreet"><a href="'+cookiePolicyLinkIn+'" title="'+cookieDiscreetLinkText+'">'+cookieDiscreetLinkText+'</a></div>');}else{$('body').prepend('<div class="cc-cookies cc-discreet"><a href="'+cookiePolicyLinkIn+'" title="'+cookieDiscreetLinkText+'">'+cookieDiscreetLinkText+'</a></div>');}
if(cookieDiscreetPosition=="topleft"){$('div.cc-cookies').css("top","0");$('div.cc-cookies').css("left","0");}
if(cookieDiscreetPosition=="topright"){$('div.cc-cookies').css("top","0");$('div.cc-cookies').css("right","0");}
if(cookieDiscreetPosition=="bottomleft"){$('div.cc-cookies').css("bottom","0");$('div.cc-cookies').css("left","0");}
if(cookieDiscreetPosition=="bottomright"){$('div.cc-cookies').css("bottom","0");$('div.cc-cookies').css("right","0");}}else if(cookieAnalytics){if(appOrPre){$('body').append('<div class="cc-cookies '+cookieOverlay+'">'+cookieAnalyticsMessage+cookieAccept+cookieDecline+'<a href="'+cookieWhatAreTheyLink+'" title="Visit All about cookies (External link)">'+cookieWhatAreLinkText+'</a></div>');}else{$('body').prepend('<div class="cc-cookies '+cookieOverlay+'">'+cookieAnalyticsMessage+cookieAccept+cookieDecline+'<a href="'+cookieWhatAreTheyLink+'" title="Visit All about cookies (External link)">'+cookieWhatAreLinkText+'</a></div>');}}
if(cookiePolicyPage){if(appOrPre){$('body').append('<div class="cc-cookies '+cookieOverlay+'">'+cookiePolicyPageMessage+" "+' <a href="#accept" class="cc-cookie-accept">'+cookieAcceptButtonText+'</a> '+' <a href="#decline" class="cc-cookie-decline">'+cookieDeclineButtonText+'</a> '+'</div>');}else{$('body').prepend('<div class="cc-cookies '+cookieOverlay+'">'+cookiePolicyPageMessage+" "+' <a href="#accept" class="cc-cookie-accept">'+cookieAcceptButtonText+'</a> '+' <a href="#decline" class="cc-cookie-decline">'+cookieDeclineButtonText+'</a> '+'</div>');}}else if((!cookieAnalytics)&&(!cookieDiscreetLink)){if(appOrPre){$('body').append('<div class="cc-cookies '+cookieOverlay+'">'+cookieMessage+cookieDecline+'</div>');}else{$('body').prepend('<div class="cc-cookies '+cookieOverlay+'">'+cookieMessage+cookieDecline+'</div>');}}}
if((cookieCutter)&&(!cookieCutterDeclineOnly)&&(($cookieDeclined)||(!$cookieAccepted))){$(cookieDisable).html('<div class="cc-cookies-error">'+cookieErrorMessage+' <a href="#accept" class="cc-cookie-accept">'+cookieAcceptButtonText+'</a> '+'</div>');}
if((cookieCutter)&&(cookieCutterDeclineOnly)&&($cookieDeclined)){$(cookieDisable).html('<div class="cc-cookies-error">'+cookieErrorMessage+' <a href="#accept" class="cc-cookie-accept">'+cookieAcceptButtonText+'</a> '+'</div>');}
if((cookieNotificationLocationBottom)&&(!cookieDiscreetLink)){$('div.cc-cookies').css("top","auto");$('div.cc-cookies').css("bottom","0");}
if((cookieNotificationLocationBottom)&&(cookieDiscreetLink)&&(cookiePolicyPage)){$('div.cc-cookies').css("top","auto");$('div.cc-cookies').css("bottom","0");}
$('.cc-cookie-accept, .cc-cookie-decline').click(function(e){e.preventDefault();var currentDomain=document.domain;var domain=currentDomain
if(cookieSubDomains){var domainParts=currentDomain.split('.');if(domainParts.length>=2){domain='.'+domainParts[domainParts.length-2]+'.'+domainParts[domainParts.length-1]}}
if($(this).is('[href$=#decline]')){$.cookie("cc_cookie_accept",null,{path:'/'});$.cookie("cc_cookie_decline","cc_cookie_decline",{expires:cookieExpires,path:'/'});if(options.cookieDomain){$.cookie("__utma",null,{domain:'.'+options.cookieDomain,path:'/'});$.cookie("__utmb",null,{domain:'.'+options.cookieDomain,path:'/'});$.cookie("__utmc",null,{domain:'.'+options.cookieDomain,path:'/'});$.cookie("__utmz",null,{domain:'.'+options.cookieDomain,path:'/'});}}else{$.cookie("cc_cookie_decline",null,{path:'/'});$.cookie("cc_cookie_accept","cc_cookie_accept",{expires:cookieExpires,path:'/',domain:domain});}
$(".cc-cookies").fadeOut(function(){location.reload();});});$('a.cc-cookie-reset').click(function(f){f.preventDefault();$.cookie("cc_cookie_accept",null,{path:'/'});$.cookie("cc_cookie_decline",null,{path:'/'});$(".cc-cookies").fadeOut(function(){location.reload();});});$('.cc-cookies-error a.cc-cookie-accept').click(function(g){g.preventDefault();$.cookie("cc_cookie_accept","cc_cookie_accept",{expires:cookieExpires,path:'/'});$.cookie("cc_cookie_decline",null,{path:'/'});location.reload();});};})(jQuery);(function($){"use strict";$(function(){function parseDomain(url){var ret=null;if(url){if(url.substring(0,2)==='//'||url.substring(0,5)==='http:'||url.substring(0,6)==='https:'){ret=url.split('/')[2];}}
return ret;}
function isExternalUrl(url){var ret=false,domain=parseDomain(url);if(domain){ret=!/^((www\.)?mysteryland\.nl|localhost)$/.test(domain);}
return ret;}
$("a").each(function(){var url=$(this).attr('href');if(isExternalUrl(url)){$(this).attr('target','_blank');}});});})(jQuery);$(document).ready(function(){if(showCookieMessage){var message='We use cookies to offer you the best experience possible. We store no personal data. {{cookieAcceptButton}}';if(privacyPolicyUrl){message=message+' <a href="'+privacyPolicyUrl+'"title="Privacy Policy" target="_blank">Privacy Policy</a>';}
$.cookieCuttr({cookieAnalytics:false,cookieMessage:message,cookieSubDomains:true,cookieNotificationLocationBottom:true});}});var APP={init:function(){var doc=document.documentElement;doc.setAttribute('data-useragent',navigator.userAgent);APP.packery.init();APP.scroll.init();APP.nav.init();APP.lightbox.init();APP.videoPlayer.init();APP.faq.init();APP.tickets.init();APP.lineup.init();APP.newsletter.init();APP.tooptip.init();APP.parallax.init();APP.about.init();APP.glider.init();APP.confetti.init();APP.bird.init();APP.schedule.init();APP.artist.init();if(!$('html').hasClass('lt-ie9')&&!$('body').hasClass('lineup')){APP.disableHoverStylesOnScroll.init();}
APP.news.init();}};APP.helpers={responseActive:false,$ajaxResponse:$('.js-ajax-response'),transitionEnd:'transitionend webkitTransitionEnd oTransitionEnd otransitionend',headerHeight:$('.header').outerHeight(),scrollToElement:function($element,offset){var target=($element.length?$element.offset().top-this.headerHeight:0)+offset;$('html, body').animate({scrollTop:target},500);},showPage:function(){},naturalSorter:function(as,bs){var a,b,a1,b1,i=0,n,L,rx=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(as===bs){return 0;}
a=as.toLowerCase().match(rx);b=bs.toLowerCase().match(rx);L=a.length;while(i<L){if(!b[i]){return 1;}
a1=a[i];b1=b[i++];if(a1!==b1){n=a1-b1;if(!isNaN(n)){return n;}
return a1>b1?1:-1;}}
return b[i]?-1:0;},history:{lastLocation:null,lastTitle:null,setState:function(state,title,url){this.lastLocation=location.href;history.replaceState({path:url},title,url);},replaceState:function(state,title,url){this.lastLocation=location.href;history.replaceState({path:url},title,url);},removeState:function(){history.replaceState({path:this.lastLocation},'',this.lastLocation);}},callback:{functions:{addthisCallback:function(){APP.social.reinitAddThis();},videoCallback:function(){APP.videoPlayer.bindClickHandlers(APP.lightbox.$activeLightbox);},favouriteCallback:function(){APP.favourites.bindClickHandlers(APP.lightbox.$activeLightbox);},artistDetailCallback:function(){APP.artist.bindClickHandlers(APP.lightbox.$activeLightbox);}},execute:function(key){this.functions[key]();}},ajaxResponse:function(response){var _this=this;this.$ajaxResponse.html(response).addClass('status-active');this.responseActive=true;setTimeout(function(){_this.$ajaxResponse.removeClass('status-active');_this.responseActive=false;},3000);},isJsonString:function(str){try{JSON.parse(str);}catch(e){return false;}
return true;}};APP.responsive={BREAKPOINT_SMALL:768,BREAKPOINT_MEDIUM:960,BREAKPOINT_TABLET:1025,BREAKPOINT_MEDIUMLARGE:1280,BREAKPOINT_LARGE:1480,getCurrentBreakpoint:function(){var tries=['small','medium','tablet','mediumlarge','large'];var i=0;var bp='small';do{bp=tries[i];}while(APP.responsive.matchesBreakpoint(tries[++i]));return bp;},matchesBreakpoint:function(breakpoint){switch(breakpoint){case'small':return document.documentElement.clientWidth>=this.BREAKPOINT_SMALL;case'medium':return document.documentElement.clientWidth>=this.BREAKPOINT_MEDIUM;case'tablet':return document.documentElement.clientWidth>=this.BREAKPOINT_TABLET;case'mediumlarge':return document.documentElement.clientWidth>=this.BREAKPOINT_MEDIUM;case'large':return document.documentElement.clientWidth>=this.BREAKPOINT_LARGE;}},widthMatchesBreakpoint:function(width,breakpoint){switch(breakpoint){case'small':return width>=this.BREAKPOINT_SMALL;case'medium':return width>=this.BREAKPOINT_MEDIUM;case'tablet':return document.documentElement.clientWidth>=this.BREAKPOINT_TABLET;case'mediumlarge':return width>=this.BREAKPOINT_MEDIUM;case'large':return width>=this.BREAKPOINT_LARGE;}}};APP.gifLoader={$body:$('body'),$gif:$('.js-animated-gif'),init:function(){_self=this;if(APP.responsive.matchesBreakpoint('small')){_self.$gif.each(function(){var $container=$(this),gifLocation=$(this).attr('data-animated-gif');$container.append('<img class="animated-gif" src="'+gifLocation+'">');imagesLoaded($container,function(){$('.animated-gif',$container).addClass('is-loaded');$('.placeholder',$container).remove();});});}}};APP.packery={init:function(){if(!$('.js-pckry, .pckry-grid').length){return;}
APP.packery.initPackery();APP.packery.resizeListener();},resizeListener:function(){var resizeTimer;$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(APP.packery.initPackery,200);});$('.pckry-grid a.readmore, .list-item a').on('click',function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(APP.packery.initPackery,60);});},initPackery:function(){if(true){APP.packery.setPackery();}else{APP.packery.unsetPackery();}},resizeContainer:function($container){$container.each(function(){var colCount=5;if(APP.responsive.widthMatchesBreakpoint($(window).width(),'tablet')){colCount=5;}else if(APP.responsive.widthMatchesBreakpoint($(window).width(),'medium')){colCount=4;}else if(APP.responsive.widthMatchesBreakpoint($(window).width(),'small')){colCount=3;}else{colCount=2;}
var containerWidth=Math.min(Math.floor($container.parent().width()/colCount)*colCount,1470);$container.width(Math.round(containerWidth));$container.css('margin-left',($container.parent().width()-containerWidth)/2+'px');});},resizeBlocks:function($container){$container.each(function(){var ratio=305/290;var baseHeight=Math.round($('.block-item--1x1:not(.hide-on-mobile)').first().width()*ratio);$('.block-item--1x2, .block-item--1x1').each(function(){var t=$(this);t.height(baseHeight);});$('.block-item--2x2').each(function(){var t=$(this);t.height(baseHeight*2);});$('.block-item--2x3').each(function(){var t=$(this);if(APP.responsive.matchesBreakpoint('small')){t.height(baseHeight*2);}else{t.height(baseHeight*4/3);}});});},setPackery:function(){var $container=$('.js-pckry');APP.packery.resizeContainer($container);APP.packery.resizeBlocks($container);$container.each(function(){$(this).packery({itemSelector:'.block-item',transitionDuration:'0',percentPosition:true,isOriginTop:true,}).on('layoutComplete',APP.packery.showItems());});if(!APP.responsive.matchesBreakpoint('small')){return;}
var $pckryGrid=$('.pckry-grid');imagesLoaded($pckryGrid,function(){APP.packery.resizeContainer($pckryGrid);$pckryGrid.each(function(){$(this).packery({itemSelector:'.grid__item',transitionDuration:'0',percentPosition:true,isOriginTop:true,gutter:0}).on('layoutComplete',APP.packery.showItems());});});},unsetPackery:function(){var $container=$('.js-pckry'),$pckry=$container.data('packery');if($pckry){$container.packery('destroy');}},showItems:function(){if(typeof packeryFirstInstance!=='undefined'){packeryFirstInstance.className=packeryFirstInstance.className.replace(/\bhide-items\b/,'');}}};APP.social={reinitAddThis:function(){var tbx=document.querySelectorAll(".addthis_toolbox"),svcs={email:'Email',facebook:'Facebook',twitter:'Twitter',expanded:'More'};for(var s in svcs){tbx.innerHTML+='<a class="addthis_button_'+s+'">'+svcs[s]+'</a>';}
addthis.toolbox(".addthis_toolbox");}};APP.scroll={threshold:15,reappear:true,scrolled_down:false,$elem:$('.header'),$schedulecontrols:$('.js-schedule-control'),documentHeight:$(document).height(),init:function(){this.bindScrollHandlers();},toggleClass:function(evt){var scrollTop=(typeof window.scrollY=='undefined')?document.documentElement.scrollTop:window.scrollY;scrolled_down=scrollTop>this.threshold;var _toggle_class=function(){if(scrolled_down){APP.scroll.$elem.addClass('fixed');if(!APP.scroll.reappear){$(window).off('scroll',toggle_class);}
on=true;}else if(APP.scroll.reappear){APP.scroll.$elem.removeClass('fixed');on=false;}};if(evt=='scroll'&&window.requestAnimationFrame){window.requestAnimationFrame(_toggle_class);}else{_toggle_class();}},toggleScheduleControls:function(evt){var _this=this,scrollTop=$(window).scrollTop();scrolled_down=scrollTop>220;scrolled_bottom=scrollTop>(this.documentHeight-300);var _toggle_schedule_control=function(){if(scrolled_down&&!scrolled_bottom){_this.$schedulecontrols.addClass('is-scrolled');}else{_this.$schedulecontrols.removeClass('is-scrolled');}};if(evt=='scroll'&&window.requestAnimationFrame){window.requestAnimationFrame(_toggle_schedule_control);}else{_toggle_schedule_control();}},bindScrollHandlers:function(){var timer;if(false){$(window).scroll(function(){clearTimeout(timer);timer=setTimeout(function(){APP.scroll.toggleClass('scroll');},10);});$(window).on('touchmove',function(){APP.scroll.toggleClass('touch');});}else{var mobHeader=document.querySelector(".header");var headroom=new Headroom(mobHeader,{"tolerance":3,"offset":80,"classes":{"initial":"header--animted","pinned":"header--pinned","unpinned":"header--unpinned"}});headroom.init();var backtotopQS=document.querySelector(".back-to-top");if(backtotopQS){var backtotop=new Headroom(backtotopQS,{"tolerance":3,"offset":80,"classes":{"initial":"backtotop--animted","pinned":"backtotop--pinned","unpinned":"backtotop--unpinned"}});backtotop.init();}
var sidebar=document.querySelector(".artist-sidebar");if(sidebar){var sideroom=new Headroom(sidebar,{"tolerance":3,"offset":80,"classes":{"initial":"sidebar--animted","pinned":"sidebar--pinned","unpinned":"sidebar--unpinned"}});sideroom.init();}
if(this.$schedulecontrols.length){$(window).scroll(function(){clearTimeout(timer);timer=setTimeout(function(){APP.scroll.toggleScheduleControls('scroll');},33);});}}}};APP.nav={init:function(){$('.toggle-e-list-form, .e-list-form .close-form').on('click',function(){$('.e-list-form').toggle();});},};APP.disableHoverStylesOnScroll={init:function(){var body=document.body,timer;window.addEventListener('scroll',function(){clearTimeout(timer);if(!body.classList.contains('disable-hover')){body.classList.add('disable-hover');}
timer=setTimeout(function(){body.classList.remove('disable-hover');},300);},false);}};APP.lightbox={$lightboxContainer:$('<div class="lightbox"><div class="lightbox__inner"><a href="#" class="lightbox__close js-lightbox-close">×</a></div></div>'),$body:$('body'),$wrapper:$('.wrapper'),$document:$(document),$window:$(window),$activeLightbox:null,$innerLightbox:null,scrollPosition:null,callback:null,init:function(){this.$body.on('click','.js-lightbox-link',function(e){if($(e.target).hasClass('js-favourite')){e.preventDefault();APP.favourites.handle($(this));return;}
if(e.metaKey||!APP.responsive.matchesBreakpoint('small')){return;}
e.preventDefault();APP.lightbox.execute($(this),e);});},execute:function($elm,evt,callback){var ajaxUrl=$elm.attr('href');if(!ajaxUrl||ajaxUrl=='#'){return false;}
APP.lightbox.callback=callback?callback:$elm.attr('data-js-callback').split(' ');APP.lightbox.loadContent(ajaxUrl);if(!$elm.attr('data-nostatechange')){APP.helpers.history.setState(null,null,ajaxUrl);}},unbind:function(){$('.js-lightbox-link').unbind();},open:function($content){if($('.js-lightbox.status-active').length){this.close();}
this.$activeLightbox=this.$lightboxContainer.clone();this.$innerLightbox=this.$activeLightbox.children('.lightbox__inner');this.$innerLightbox.append($content);this.$activeLightbox.appendTo(this.$body);this.scrollPosition=this.$document.scrollTop();this.$wrapper.css({'position':'fixed','top':-this.scrollPosition});this.$document.scrollTop(0);setTimeout(function(){APP.lightbox.$activeLightbox.addClass('status-active');},0);this.bindClose();imagesLoaded(this.$activeLightbox,function(){APP.lightbox.setHeight();});this.$body.addClass('lightbox-active');if(APP.lightbox.callback){for(var i=0;i<APP.lightbox.callback.length;i++){APP.helpers.callback.execute(APP.lightbox.callback[i]);}}},close:function(){APP.helpers.history.removeState();function afterTransition($this){APP.lightbox.$wrapper.css({'position':'static','top':0});APP.lightbox.$document.scrollTop(APP.lightbox.scrollPosition);$this.remove();APP.lightbox.$body.removeClass('lightbox-active');}
if(Modernizr.csstransitions){this.$activeLightbox.removeClass('status-active').on(APP.helpers.transitionEnd,function(){afterTransition($(this));});return;}
this.$activeLightbox.removeClass('status-active');afterTransition(this.$activeLightbox);},bindClose:function(){$(document).on('click touchend keyup',function(e){if((e.keyCode==27)||($(e.target).is('.js-lightbox-close, .lightbox, .lightbox__inner'))){APP.lightbox.close();return false;}});},loadContent:function(url){$.get(url,function(data){APP.lightbox.open(data);});},setHeight:function(){if(this.$innerLightbox.outerHeight()>this.documentHeight){this.$body.css('height',this.$innerLightbox.outerHeight());}else if(this.$innerLightbox.outerHeight()<this.$window.height()){this.$innerLightbox.css('height',this.$window.height());}}};APP.videoPlayer={$activeVideo:null,init:function(){this.bindHandlers();},bindHandlers:function($context){var self=this;var $selector=$context?$('.js-video-link',$context):$('.js-video-link');if($selector.length){var timer;$(window).scroll(function(){if(timer){window.clearTimeout(timer);}
timer=window.setTimeout(function(){},200);});self.bindClickHandlers($context);$selector.each(function(){videoType=$(this).attr('data-video-type');if(videoType=="vimeo"&&!Modernizr.touchevents){if(!$(this).hasClass('playing')){$(this).addClass('playing');var action;action='replace';APP.videoPlayer.playVideo($(this).parents('.js-video'),$(this),action,true);}}});}},bindClickHandlers:function($context){var $selector=$context?$('.js-video-link',$context):$('.js-video-link');$selector.on('click',function(e){e.preventDefault();console.log($(this));if(!$(this).hasClass('playing')){$(this).addClass('playing');var action;action='replace';APP.videoPlayer.playVideo($(this).parents('.js-video'),$(this),action);}});},scrollHandler:function($context){var $selector=$context?$('.js-video-link',$context):$('.js-video-link');var top=$selector.offset().top<=$(window).scrollTop()+$(window).height();if(top){if(!$selector.hasClass('playing')){$selector.addClass('playing');APP.videoPlayer.playVideo($(this).parents('.js-video'),$selector,'replace');}}},playVideo:function($activeVideo,$videoLink,action,noClose,type){videoLink=$videoLink.attr('data-video-link');videoAction=action?action:$videoLink.attr('data-action');videoType=type?type:$videoLink.attr('data-video-type');if(!APP.responsive.matchesBreakpoint('tablet')){videoLink=videoLink.replace("background=1","");}
iframe='<iframe class="video-player__video" src="'+videoLink+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';this.replaceVideo($activeVideo,noClose);return false;},replaceVideo:function($activeVideo,noClose){if(navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*OS 7_\d/i)){append='<div class="js-video-container">'+iframe+'</div>';}else{append='<div class="js-video-container">'+iframe+'</div>';}
var closeBtn='<span class="icon-stop video-player__close js-video-close"></span>';if(noClose){closeBtn='';}
$activeVideo.find('.js-video-placeholder').append($(append)).parent('.video-player').append(closeBtn);setTimeout(function(){$activeVideo.addClass('status-active');},0);this.bindCloseHandler();},stopVideo:function($activeVideo){$activeVideo.removeClass('status-active').one(APP.helpers.transitionEnd,function(){$(this).find('.js-video-container').remove();});$('.js-video-link').removeClass('playing');},bindCloseHandler:function(){var self=this;$(document).one('click','.js-video-close',function(){APP.videoPlayer.stopVideo($(this).parents('.video-player').first());return false;});}};APP.news={initialized:false,pendingUrl:undefined,init:function(){this.bindClickHandlers();$(window).on('load',function(){APP.news.initialized=true;if(APP.news.pendingUrl){APP.news.handleClick(APP.news.pendingUrl);}});},bindClickHandlers:function(){var self=this;$('a.block--news, .news-item').on('click',function(evt){if(evt.metaKey||!APP.responsive.matchesBreakpoint('small')){return;}
evt.preventDefault();var article_url=$(this).find(".article_url");if(article_url.length){ARTICLE_DETAILS_URL=$.trim(article_url.val());}
self.handleClick(ARTICLE_DETAILS_URL);});},handleClick:function(url){if(!APP.news.initialized){APP.news.pendingUrl=url;return;}
$.ajax({url:url}).done(function(data){APP.lightbox.open($(data));APP.videoPlayer.init();});}};APP.faq={init:function(){if(!$('.list').length){return;}
$('.list-title').each(function(){while($(this)[0].scrollWidth>$(this).innerWidth()){$(this).css('font-size',(parseInt($(this).css('font-size'),10)-1)+'px');}});$('.list-item>a').on('click',function(e){e.preventDefault();if($(this).hasClass('plus')){$(this).addClass('minus').addClass('active').removeClass('plus');}else{$(this).addClass('plus').removeClass('active').removeClass('minus');}
var $answer=$(this).parent().children('.answer');$answer.toggle();});}};APP.tickets={init:function(){if(!$('.ticket').length){return;}
$('.ticket a.readmore').on('click',function(e){e.preventDefault();$(this).hide();var $content=$(this).parents('.ticket').children('.ticket-content');$content.toggle(0);});}};APP.lineup={init:function(){if(!$('.line-up').length&&!$('.included').length){return;}
APP.lineup.removeFirstLineDots();$(window).resize(APP.lineup.removeFirstLineDots);APP.lineup.dropdownFilter();APP.lineup.scrollToTop();APP.lineup.addViews();APP.lineup.addFilters();APP.lineup.initSideBar();APP.lineup.loadArtist();APP.lineup.likeButton();APP.lineup.spotifyPreview('li.artist .play-button');$('.filter-option').each(function(){if($(this).hasClass("active")){$(this).click();}});},dropdownFilter:function(){$('#dropdown-filter').on('click',function(){$(this).children('.filter-dropdown').toggle();if($(this).hasClass('active')){$(this).removeClass('active');$(this).children('.button-text').html("Filter");}else{$(this).addClass('active');$(this).children('.button-text').html("<i class='fa fa-times'></i>");}});$('#dropdown-filter .filter-dropdown').on('click',function(e){e.stopPropagation();});},scrollToTop:function(){$('.back-to-top').on('click',function(){$("html, body").animate({scrollTop:0},400);setTimeout(function(){console.log("unpin");$('.back-to-top').removeClass('backtotop--pinned').addClass('backtotop--unpinned');},450);});},initSideBar:function(){APP.lineup.toggleSidebar();APP.lineup.spotifyPreview('.media-item.cat-music');APP.lineup.playVideo();},playVideo:function(){$('.media-item.cat-video').on('click',function(e){if(!APP.responsive.matchesBreakpoint('small')){window.scrollTo(0,0);}
e.preventDefault();$('.fa.fa-stop').each(function(){$(this).removeClass('fa-stop').addClass('fa-play');});if($(this).hasClass("active")){$(this).find('.fa.fa-stop').addClass('fa-play').removeClass('fa-stop');console.log("close");$('.artist-picture .video-player__close').click();$('.artist-picture .js-video-container').remove();$(this).removeClass("active");}else{$('.media-item, li.artist .play-button').each(function(){$(this).removeClass('active');});$(this).addClass("active");audioElement.pause();$(this).find('.fa.fa-play').removeClass('fa-play').addClass('fa-stop');$('.artist-picture .video-player__link').attr('data-video-link',$(this).attr('data-src'));$('.artist-picture .video-player__link').click();}});},spotifyPreview:function(identifier){$(identifier).on('click',function(e){console.log("event triggered");e.preventDefault();$('.fa.fa-stop').each(function(){$(this).removeClass('fa-stop').addClass('fa-play');});$('.artist-picture .video-player__close').click();$('.artist-picture .js-video-container').remove();if($(this).hasClass("active")){console.log("active");audioElement.pause();$(this).find('.fa.fa-stop').removeClass('fa-stop').addClass('fa-play');$(this).removeClass("active");}else{console.log("inactive");$(this).find('.fa.fa-play,.fa.fa-stop').toggleClass('fa-play').toggleClass('fa-stop');$('audio').remove();$('.media-item, li.artist .play-button').each(function(){$(this).removeClass('active');});$(this).addClass("active");audioElement.setAttribute('src',$(this).attr("data-src"));audioElement.setAttribute('autoplay','autoplay');audioElement.play();}});},removeFirstLineDots:function(){},addViews:function(){$('.filter-option.tiles').on('click',function(){$(this).addClass('active');$('.filter-option.list').removeClass('active');$('.lineup-container .grid').removeClass('content');$('.lineup-container .line-up').removeClass('list');$('.lineup-container .line-up').addClass('tiles');});$('.filter-option.list').on('click',function(){$(this).addClass('active');$('.filter-option.tiles').removeClass('active');$('.lineup-container .grid').addClass('content');$('.lineup-container .line-up').removeClass('tiles');$('.lineup-container .line-up').addClass('list');APP.lineup.removeFirstLineDots();});},likeButton:function(){$('.artist .like-button').on("click",function(e){e.stopPropagation();var like_url=LIKE_ARTIST_URL;var artist_performance_id=$(this).children('.fa').attr('data-artist-performance-pk')
var like_div=$(this)
$.ajax({type:'POST',data:{'artist_performance_id':artist_performance_id},url:like_url,timeout:10000}).done(function(data){if(like_div.attr('data-disabled')){return;}else{e.stopPropagation();}
liked=$('.filter-option.like').hasClass('active');like_div.toggleClass("active");like_div.children('.fa').toggleClass("fa-heart-o");like_div.children('.fa').toggleClass("fa-heart");if(like_div.parents('.artist').attr("data-favourite")==1){like_div.parents('.artist').attr("data-favourite",0);if(liked===true){like_div.parents('.artist').hide();}}else{like_div.parents('.artist').attr("data-favourite",1);}}).fail(function(xhr){console.log("fail!");});});},loadArtist:function(){$('.tiles li.artist').on("click",function(){$('li.artist').each(function(){$(this).removeClass("active");});$(this).addClass("active");$.get($(this).attr("data-artist-url"),function(data){$(".artist-sidebar").empty().html(data);$(".artist-sidebar").show();$("footer, .general-wrapper").css("margin-right","395px");APP.lineup.initSideBar();APP.videoPlayer.init();});}).children('.play-button').click(function(e){return false;});},toggleSidebar:function(){$('.tiles li.artist').on("click",function(){if(!APP.responsive.matchesBreakpoint('small')){$('.artist-sidebar').show();$('.general-wrapper').hide();window.scrollTo(0,0);}});$('.back-to-overview, .back-to-overview-small').on("click",function(){$('li.artist').each(function(){$(this).removeClass("active");});if(!APP.responsive.matchesBreakpoint('small')){$('.artist-sidebar').hide();$('.general-wrapper').show();}});var resizeTimer;$(window).resize(function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){if(APP.responsive.matchesBreakpoint('small')){$('.general-wrapper').show();}else{if($('.artist-sidebar').is(':visible')){$('.general-wrapper').hide();}}},200);});},hideEmptyStages:function(){$('.lineup-container').each(function(){$(this).show();if($(this).find('.artist:visible').length){}else{$(this).hide();}});},addFilters:function(){console.log("adding filters");$('.filter-option.cat, .filter-option.day, .filter-option.like').on('click',function(){var self=this;var day,cat;if($(this).hasClass('cat')){$('.filter-option.cat').removeClass('active');day=$('.filter-option.day.active').attr('data-day');cat=$(self).attr('data-cat');liked=$('.filter-option.like').hasClass('active');$('.filter-option.cat[data-cat="'+cat+'"]').addClass('active');}else if($(this).hasClass('day')){$('.filter-option.day').removeClass('active');day=$(self).attr('data-day');cat=$('.filter-option.cat.active').attr('data-cat');liked=$('.filter-option.like').hasClass('active');$('.filter-option.day[data-day="'+day+'"]').addClass('active');}else{if($(this).hasClass('active')){liked=!$('.filter-option.like').hasClass('active');$('.filter-option.like .fa').addClass('fa-heart-o');$('.filter-option.like .fa').removeClass('fa-heart');}else{liked=!$('.filter-option.like').hasClass('active');$('.filter-option.like .fa').addClass('fa-heart');$('.filter-option.like .fa').removeClass('fa-heart-o');}
day=$('.filter-option.day.active').attr('data-day');cat=$('.filter-option.cat.active').attr('data-cat');$('.filter-option.like').toggleClass('active');}
if(day=="all"){if(cat=="all"){$('.artist').each(function(){if((liked&&$(this).attr('data-favourite')>0)||!liked){$(this).show();}else{$(this).hide();}});}else{$('.artist').each(function(){if($(this).attr('data-category')==cat){if((liked&&$(this).attr('data-favourite')>0)||!liked){$(this).show();}else{$(this).hide();}}else{$(this).hide();}});}}else{if(cat=="all"){$('.artist').each(function(){if($(this).attr('data-day')==day){if((liked&&$(this).attr('data-favourite')>0)||!liked){$(this).show();}else{$(this).hide();}}else{$(this).hide();}});}else{$('.artist').each(function(){if($(this).attr('data-category')==cat&&$(this).attr('data-day')==day){if((liked&&$(this).attr('data-favourite')>0)||!liked){$(this).show();}else{$(this).hide();}}else{$(this).hide();}});}}
APP.lineup.hideEmptyStages();APP.lineup.removeFirstLineDots();});}};APP.newsletter={init:function(){var self=APP.newsletter;$('.newsletter-form').on("submit",function(e){e.preventDefault();var email_header=$.trim($("#email_header").val());var email_footer=$.trim($("#email_footer").val());if(email_header===''){var email=email_footer}
else{var email=email_header}
self.sendForm(email,function(result){$('.close-form').hide();$('.newsletter-form').hide();$('.newsletter-msg').text(result.msg).fadeIn(200);setTimeout(function(){$('.newsletter-msg').text(result.msg).hide();$('.close-form').fadeIn(200);$('.newsletter-form').fadeIn(200);},3000);});});},sendForm:function(email,callback){var url=SUBSCRIBE_URL;var email_header=$.trim($("#email_header").val());var email_footer=$.trim($("#email_footer").val());if(email_header===''){var email=email_footer}
else{var email=email_header}
$.ajax({type:'POST',data:{'email':email},url:url,timeout:10000}).done(function(data){callback({succes:true,msg:data.message});}).fail(function(xhr){callback({succes:false,msg:xhr.responseJSON.message});});}};APP.bird={init:function(){this.$trigger=$('.js-wow-bird');if(!this.$trigger.length){return;}
this.$currentName=$('.js-wow-bird-current-name');this.$names=$('.js-wow-bird-name');if(!this.$names.length){return;}
this.nameIndex=0;this.showNextName();},showNextName:function(){this.$currentName.html(this.$names.eq(this.nameIndex).html());this.$trigger.addClass('active');this.nameIndex++;this.nameIndex%=this.$names.length;var self=this;setTimeout(function(){self.hideName();},1500);},hideName:function(){this.$trigger.removeClass('active');var self=this;setTimeout(function(){self.showNextName();},700);}};APP.tooptip={init:function(){$('.like-button').on('click',function(e){if(!$(this).attr('data-disabled')){return;}else{e.stopPropagation();}
if($(this).hasClass('tlite-visible')){$(this).removeClass('tlite-visible');tlite.hide(this);$('.like-button').each(function(){$(this).removeClass('tlite-visible');tlite.hide(this);});}else{$('.like-button').each(function(){$(this).removeClass('tlite-visible');tlite.hide(this);});tlite.show(this,{grav:'ne'});$(this).addClass('tlite-visible');var self=this;$(window).resize(function(){$(self).removeClass('tlite-visible');tlite.hide(self);});$('li.artist').on('mouseleave',function(){$(self).removeClass('tlite-visible');tlite.hide(self);});}});},classWhen:function(el){var classes=(el.className||'').split(' ');return function(cssClass,opts){return~classes.indexOf(cssClass)&&opts;};}};APP.glider={init:function(){if($('body').hasClass('home')){$('.center').slick({centerMode:true,centerPadding:'60px',slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:false,centerMode:true,centerPadding:'90px',slidesToShow:2}},{breakpoint:580,settings:{arrows:false,centerMode:true,centerPadding:'60px',slidesToShow:1}}]});$('.slider .artist').on("click",function(){window.location=$(this).attr('data-artist-url');}).find('.play-button').click(function(e){console.log("clicked play");e.preventDefault();return false;});}}};APP.about={init:function(){if($('body').hasClass('about')){$('.about-grid .image-container').each(function(){$(this).height($(this).parents('.about-grid').height());var self=this;$(window).resize(function(){$(self).height($(self).parents('.about-grid').height());});});}}};APP.parallax={init:function(){APP.parallax.homePage();},homePage:function(){$(document).ready(function(){$('.home .placeholder-wrapper').parallax({calibrateX:true,calibrateY:true,invertX:false,invertY:false,limitX:false,limitY:false,scalarX:1.4,scalarY:0,frictionX:0.8,frictionY:0.8,originX:0.5,originY:0.5});$('.camping .placeholder-wrapper').parallax({calibrateX:true,calibrateY:true,invertX:false,invertY:false,limitX:false,limitY:false,scalarX:0.3,scalarY:0,frictionX:0.8,frictionY:0.8,originX:0.5,originY:0.5});});}};APP.confetti={N_PARTICLES:256,isActive:false,init:function(){var confettiButton=document.querySelector('.js-wow-confetti');if(!confettiButton){return;}
if(!APP.responsive.matchesBreakpoint('small')||Modernizr.touchevents){this.N_PARTICLES=64;}
var audioBark=new Audio(DOG_URL);confettiButton.addEventListener('mouseenter',function(e){e.preventDefault();e.stopPropagation();if(this.isActive){return;}
audioBark.currentTime=0;audioBark.play();}.bind(this),false);confettiButton.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();var bounds=confettiButton.getBoundingClientRect();var offsetY=12;if(APP.responsive.matchesBreakpoint('small')){offsetY=35;}
this.play({posX:bounds.left+bounds.width/2,posY:bounds.top+bounds.height/2+offsetY});}.bind(this),false);},destroy:function(el){el.parentNode.removeChild(el);document.body.setAttribute('data-wow','');this.isActive=false;},play:function(args){if(this.isActive){return;}
posX=args.posX||0;posY=args.posY||0;this.isActive=true;document.body.setAttribute('data-wow','confetti');var container=document.createElement('div');container.className+='wow-confetti';var c=document.createElement('canvas');container.appendChild(c);document.body.appendChild(container);Object.getOwnPropertyNames(Math).map(function(p){window[p]=Math[p];});var N_PARTICLES=this.N_PARTICLES,w,h,ctx=c.getContext('2d'),confettis=[],particles=[],source={},t=0,req_id=null;var shotCount=0;var Particle=function(i){var confetti,pos,v,a,c_angle,angle_v,delay=rand(N_PARTICLES,0,1);delay=rand(20,0,1);this.active=false;this.shoot=function(ctx){var angle,angle_var,val,hue=rand(1,0,1);if(t-delay>=0){if(this.used){return;}
this.active=true;confetti=confettis[floor(random()*confettis.length)];pos={x:source.x+rand(-25,25),y:source.y};a={'x':0,'y':0.4};angle=rand(PI/8,-PI/8)-PI/2;c_angle=0;angle_v=rand(-30,30);val=rand(h/21,h/60);v={'x':val*cos(angle),'y':val*sin(angle)};}};this.motionUpdate=function(){v.x+=a.x;v.y+=a.y;pos.x+=round(v.x);pos.y+=round(v.y);c_angle+=angle_v;if(pos.y>h|pos.x<0|pos.x>w){pos={'x':source.x,'y':source.y};this.active=false;shotCount++;this.used=true;}};this.draw=function(ctx){ctx.save();ctx.translate(pos.x,pos.y);ctx.rotate(c_angle*Math.PI/180);ctx.drawImage(confetti,-(confetti.width/2),-(confetti.height/2));ctx.restore();this.motionUpdate();if(shotCount===N_PARTICLES){APP.confetti.destroy(container);}};};var rand=function(max,min,_int){max=(max===0||max)?max:1;min=min||0;gen=min+(max-min)*random();return(_int)?round(gen):gen;};var loadConfetti=function(){confetti_orange=new Image();confetti_orange.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAgCAYAAAAmG5mqAAACR0lEQVQ4EYWUPWhUQRSFz6wGSSRG8AdUYhHsjIUiFqKiRcBCRbHyBwXBJprOJKIWK0iiIShIChHsxMYqFgoigpFY2StIEPFv1SimkIDx7eSb2fcm89y3mwezc+895+y97859Y9TgsWWtVqv2AHewZvRa4+ahEvM/317XZhkNsQ6CLeBVDZmLurw0FtgbOgHlHrFlcdzbhow8QWCHdRTy/YiYyGoC/x37tKq66TCf0l7TBrXoDV57KpiCcIoSXqV+2GoZWjQQyFZfNKvtpqzfgRUZJW8bHQ+xqs43IjuOofYuLdFUKqiYAa0L4gKjRCmtUbwS2YVmSf9ytXZxYKFzRYqSuaLPAO9TcAX5DhcRs1jtpa0eZAH2YXtByyM/Z9YEiW5xODMeMdqktbqTY0WOF5hL+knsXBQ/yUxdjfxgLgwXIWbpLl07G1CrPjOoseBj1ErKIrPqpbTHmYv4th3RseBj5DI4wL/wGj0F2ZkS52j9PsqedH6dwAU5i5W0dwJ0i/PJ+pX56mZkfuVL8ij/4gbP6gDrhw8ZxqWNj4qnMEOqc004BGPc+1Z/KW1jU4EjInqJaJcXVdVbWJIHsx+jJ5lJT3csLrD6FgRS++ICo62RoNJUYPu4PayORILJprOvTpUhr08F0/quRw0zMBK7IfanZClRvxnVn8K2Qt5GKc9pp7sm3Um/YAj3OrMuA3dUJwQ3Sxn5k+Z02pHdUyfgQjsDeZVH3Wgk6uEz/uD9QkGiZ2RwX99HhPuZ0rcZueHOtLax6rOjmAc/AI47EIfSbQAAAABJRU5ErkJggg==";confettis.push(confetti_orange);confetti_blue=new Image();confetti_blue.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAACUUlEQVRIDaVVTWsTQRh+ZjalJLZSxApaTwZ6UFQUBAU1SQkVxIOuGCPFrx/g3ZPk5A+oJw8qIgGpJpdKrQpNUkF7VURQ1IpCQYtIC8WYZGd8d5Odrt1uJtkOLO/X8z7PvMvuDIN35XIc+5PnIfkZMHkYkm0lu0L2AyQeo7p8H2OnfntbwvhMNRVmD4LjAcW7Vc7nyB+Q4grM1LSv1EWiKfqolITBJ8FYn7ZXSgsQp0n4iRYbAOCYmN6CiJFXglIuQcpx1K0DqFaHUJe7KL4MyO8OB2MGGH+IQmlnAKc2HUFP9CKhdrSQC2iIBDKpT2s65zEx9RSRvtdgiANsE7hxkzCX1uA6CjmkVaYpVgi9TILZdQSbRJmTi7DEVcUqkaWNDKq4C4fDHHmD6t9h/KkN41zyZdtepy6bGIYeGLFsW3xAMeLkL4wuBNT9aYE8feXHnAJjJ8je8oPaZ3j78jpVC89VlrHjyJWaG1dJvdO9aCYxT7TfWtT92Gvs08v8j+he1O6XeKVomDiq/A6dcKJARfEznlJ+h05I0dqMh38UtydjnljrhhM10x/plHrXYo9hcPM1rZIHEE7UIaCj0l0M11GY3e6GOhtetPHz7uq0bID+3TkUy0cCBYvPtsG+Omk1b5lApKZQKKfoonhBj7GKlF/p/p0j5jptyhaJU30P2X766it4OzOyMVFbqVgZI4E7tP9eO9QuUYuHf70uu5nI00yHaIp7NNmSm/ZZiUUI3MDZ9JeNT+plH5/qxVDUPpcHaPIo6P6DEJ9hNN7DTP9yof8Anxeh2egaMOMAAAAASUVORK5CYII=";confettis.push(confetti_blue);confetti_purple=new Image();confetti_purple.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAXCAYAAAAP6L+eAAAC6UlEQVQ4EaVVX0iTURQ/5+7q1EVCCoVJf8BpEgmG9He5zaA/0FtUEOYf+uNb9BoY9CKELxE9tqx9DSF66sGnYC7fCqMUpptLEorIQkGLpfPzO537zbsW6DbXfbj3nt/9nd93OPc756LRNObCalcfEnkBoBYQthJhEoF+EkIMLBpjLDL9feXV3ej+FHMKGmj4p24KFA8KYC8QwfNVpP6usHs6H1+QaUWIaCUfkc8rEeGGBIw/8ycGAkej23L5oDo0PNFdJEqrUstLXy1zed4lK8tTJVRdIkUTCDoCBOcRsS5biKP/BmBduzJcP5SN670trI1cq+GLezhlvYB4WvOIlVngVnu47qHG9FqwsHYIeuNnhUM8QsCdGgMLetsjdX0ZmzebFlbOKr/OMudLzrnHFiMgC+lSR9j9wrZ5KkpYOT/xDZdJrGVxPKVsTktyFahJ/zFCgcWM7oh/Kbm4cBGIYsqfI6xwANzXWkVHrAWCrYlmIXGUhewgLTBPdoT3hYuOWAt3jrjfcx4C2kaQ19X+vyNWIkbrVKOQYkLt+SO/l1Pm9k1FHGib2P34eKzGFsiaOkbqJ7l6x2wIodzhFM0FCXM/uRxq+zheBqUzTqfjk+GLtWTprm3xg8aEhe68wiFfvFOACLHTgbQjloKQzVoksyJxiacH57daamOjldBxmwtB38WsRTQEc8nBdfhVGmP+j5zCwUOTVUxqUA5cXHOm9WWP+n+1QNaqvq36uT3Ios85U9H5tnFeVZRiI0FlCmq2pF3/nQ1v4hwj7jV0NvlrMZJTmInEL8uo7YAoK1D0rzlnlqBnsl444GkGIBroedeykjMVNhlBda1Wtee+0B3yJySYcI+kVQIkznC93eETl80lmEmZ6bLWl2LjG038YgRY9OpG52mcFk2CY13D7qiyuW/kH3LmxFDD3h01fEEH12NzcbyxVuFC12v3uD4vKGJNNvwJL4v3INJhApSqsyFZg+2RBoM5fM9/xx/XTfXRTSL/+QAAAABJRU5ErkJggg==";confettis.push(confetti_purple);confetti_green=new Image();confetti_green.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAbCAYAAACjkdXHAAACKElEQVQ4EY2UTWgTURDHZ1432bSNmHZjPXjxpHgQTzat0KNUquBBEET0ICpaKWqqIIrQkxchFVMQPRU8iUdFb1qtHzE3QT0IIkhPmqbxM7FJd5y3cZJNspvdd5nJf+Y3s7M7eQgBZ/3i6QEV7dujyP6z/GXpMRy8vyoIiuNlB16d394TwScAmHTiRIuFQnU3TGT/6t/KCxJNGXipAWoRccyyIhcacXG8LCH8bNdRweX4y1NDWu/aGYiyBGC3FsA+M9J7MhAuDs++R6B7rTA/PeARrXV9YTrBen1uGxo9H7TvPpXy6lAgrAErn/6MiJu13zy0v/vMzcyFplv3iGg0LPyxHQZUiVAwd6l0wERroWDu0va5nFLhYH6rWzo68wKF6oxIO9ph24Zc4KeKP5/aYPZGlzgxKgWIV69WKVuBnc1Y5Lgb/F/g3fexWytd4eSLY+s4+Yx0FEs2zGvfEMHLkpmY4z3e5I4RwXKx9O221nw7D+bTJxg86gbrvn0Dxu/+9oWtN+krCvFOJwifyK7dFL3lsZ1rx8BrfGPsk4SGJSrXCA6URrI/RHPg/tzZjTE0rvMQhzngOQpfCpOlVOatgNoa8GjKjCnjGSJsdQfE1zcJ2XSxmMrMiybWSCRVyg8EoF+8SYdWUpmHAritUoRVtyA+b1F+rUq7/ECdhzADypqYznH3nQ5IxHPR1cLw7AMp5Gfru/10Mj7YH9vLf7yvhZHMAifzqMHnH4mnn9rngQfNAAAAAElFTkSuQmCC";confettis.push(confetti_green);confetti_yellow=new Image();confetti_yellow.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAARCAYAAAAougcOAAABsElEQVQ4Ea1UPUsDQRB9ezkNIn40FoKESLCylWBpLIyFlaQQCz9ACxs7+6Sws7ENKMRSRSxsbBQs/AMiEUVDLMQPVBAJGEPGl4uX3CW5GC9ZmNudNzNvdmb3VuGfQ67QhXYMQocfwlm4UniiPJPqAT5cKhC1DOp/D0mhlyTTlFlKiBGaY5TgkbZDygHucKpCyNVNIjfohhfr3Ncyyb2OxE4GQRLfCHsc7SnMsBFHJB+n6E5+dXGFPtacrQpmMxXSiPO7VJegUaPCh61dEmXeRWwzwbwjhyBL2xlbeEG/JMXDdQ+xAGWKen8pVngqGQTtSdJI0Gmu5GRdFA90kym21BBerCZzbXQhhSC3OkYsQ98EfcuVSBoRJtgzA2yzYBefWFHDeLPhDSpGJXLLcnWj9HKpJkEea8qPDVN1MxcPvo3XFJZemkyCmGoyQYFKyTk6MGD0uNPk/p2PlQ+TFZgrVef+w4y0JyjcoBxWXTHWCNJ4EyI18B0VwHUN3BWk8UZNVEXmsV+FNQEUHrovW7zgHa84sWFNKhryiFVwxNUIn7VWDz7lo/wZo3KPBeNpaXGCHxCXZrRLqKcwAAAAAElFTkSuQmCC";confettis.push(confetti_yellow);confetti_purple_circle=new Image();confetti_purple_circle.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAABPElEQVQYGT2QsUvDQBTG37tkCsZ/wKUUUwUNgrqpkAxuOkvBBhxcXQSdBAddFAcHByfRVHASHB3aFHERFEEo0qYS1MlBB0VpSr3nu7bnW97d/b773neH0KvDiVvL6uufAoEuAD03f9Lr5Rv3TXNUixOvNi2EOAbArAYE9E0S1oOKc6DO8Mh7zJhoPiCizfAeCCJEyDGaUwIpf/NBZehMsGirJyo+lU8nC5Gzulh25qWUSx0nYewrQyz6jQQQMrLdzgZXw4mCukI/jtlkkCM4gpBsBahJn1rw3xG+1FpKsgVnulMbwzILqusK/doYEricO03eW1UTQe4AGbM8fjf06gMAooQCHCLa4GQmz9rbrI60ut/j19cE4HYXaE/uRBcfr7Cw0nDSjlChcCYeB4PyLB7lR74QyMsgyp3ra3/bPHFQcIeq6AAAAABJRU5ErkJggg==";confettis.push(confetti_purple_circle);confetti_orange_circle=new Image();confetti_orange_circle.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAABcElEQVQoFW1SMUvDUBC+e0kVCurQX2DTxakgiEsX/4Crg4OD4FTpVCJFwUVjioO4d3EXxD+gi7i4uzSDUJcOUgfRJnnvvHtpII2+Je/e9313990FoXDioL6hHNVFohYA1hgaE8KjpuR80X97zakol5cDqDTr3qlS4DPZycHCdwpEJ44fXfIbKQEyAfZYYAzRmdbJ+gdNljXpTY6vmbcAiH194bWFj9KS4+CzFaS0VelFTwIUTxo2thHpDgi+EwNNJR6kJc7Y/08gYtcf3hPBgKtVXQUdlZnmBkx6W8xevpMBiyNiiz3ZKcGn+hqWicVYA8xwqskgxgKuwNJakVS+u2hyfKxkD0JAULtl4lyMGW4AHpRO44DBKZdsy5TmiLMgDVf32csOO58k8fTKLleHXlf2wI98YCCmxYNtiStkAhkW7blH0Y0VcUJk4SF/Axnr32o04UQdEQiWiyzvJ/AasgcZK+e1/554kJaqx6P3PNkvOOqVQmPX4E4AAAAASUVORK5CYII=";confettis.push(confetti_orange_circle);confetti_blue_bar=new Image();confetti_blue_bar.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAGCAYAAADKfB7nAAAANklEQVQYGWNkWHcolYGRUYqBHPDv/ywWoOZ0oF5jcvQzMDFuYSJLI5KmgTeAheH//5kUBOIzAHcGC4ESYxi3AAAAAElFTkSuQmCC";confettis.push(confetti_blue_bar);confetti_star=new Image();confetti_star.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABH0lEQVQoFX2SvUoDQRDHf3sQkYiCAVs1kEBExVewCwSxyXPEx7KzEbGx8QUs7IQzMQY7QQtRBMFxZmPC7uY2A3ez/6+7ueFgScmInSVyXpKSDXlmZD3nKnICNc5wNH3PmFwVLw+sU2esWkOvN77YdR0+Um/1m+sM/oPmb+iDDC+UkyGHOtopQlvVto5qfWvBCa/qKZUv1VPyw6WTe9bY5ErJ44pAjrrlnZPCHfHJCz196k3OGfHmU7/l5guTJ1YpuNCRepE5BMI1v/Rdk2+j52ED8kiLFf9dBquq5bYZzoR42zU6M6GyC3shH4dhPxT1PElwpKfhA28W7rR3dUT7t7u6TMNWU316ju8y4VzG9CXdhWLPqx4nApSGAskfU/0P1ShHb5/Nhf8AAAAASUVORK5CYII=";confettis.push(confetti_star);};var initCanvas=function(){var s=getComputedStyle(c);if(req_id){particles=[];cancelAnimationFrame(req_id);req_id=null;t=0;}
w=c.width=~~s.width.split('px')[0];h=c.height=~~s.height.split('px')[0];source={x:posX,y:posY};for(var i=0;i<N_PARTICLES;i++){particles.push(new Particle(i));}
drawOnCanvas();};var drawOnCanvas=function(){ctx.clearRect(0,0,w,h);for(var i=0;i<N_PARTICLES;i++){if(particles[i].active){particles[i].draw(ctx);}
else{particles[i].shoot(ctx);}}
t++;req_id=requestAnimationFrame(drawOnCanvas);};loadConfetti();var audioPlop=new Audio(CORK_URL);audioPlop.play();setTimeout(function(){initCanvas();},15);}};APP.schedule={$scheduleContainer:$('.js-schedule-container'),$schedule:null,$toggleDay:$('.js-toggle-day'),$toggleFav:$('.js-toggle-favourites'),$control:$('.js-schedule-control'),$prev:$('.js-schedule-prev'),$next:$('.js-schedule-next'),visibleWidth:0,scheduleWidth:0,widthDiff:0,scheduleHeight:0,lastDeltaX:0,curLeftPos:0,itemWidth:0,leftOffset:0,isAnimating:false,isDragging:false,init:function(){var _this=this;if(!$('.js-schedule-nav').length){return;}
this.$schedule=$('.js-schedule','.js-schedule-container[data-is-current="true"]');this.setDimensions();$(window).on("orientationchange",function(){_this.setDimensions();});if(APP.responsive.matchesBreakpoint('small')){this.$scheduleContainer.hammer({swipe_velocity:2}).on("release dragleft dragright swipeleft swiperight",this.$schedule,function(event){_this.handleGesture(event);});}else{this.$scheduleContainer.hammer({swipe_velocity:0.5}).on("release dragleft dragright swipeleft swiperight",this.$schedule,function(event){_this.handleGesture(event);});}
this.$schedule.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(){_this.curLeftPos=_this.$schedule.position().left;_this.isAnimating=false;});this.clickListener();if(location.hash){var index=document.URL.substr(document.URL.indexOf('#')+1);this.toggleDays(index);}},clickListener:function(){var _this=this;this.$toggleDay.click(function(){var day=$(this).attr('data-show-day');_this.toggleDays(day);_this.$prev.hide();_this.$next.show();});this.$scheduleContainer.on('click','.js-lightbox-link',function(e){if(_this.isDragging){return false;}});$('body').bind('touchstart',function(e){});this.$next.click(function(){console.log('next click!');});this.$next.on('touchstart',function(){console.log('next click/tap!');});this.$control.click(function(){var direction=$(this).attr('data-direction'),amount=_this.itemWidth*2;console.log('control click!');if(direction=='next'){var next=_this.$schedule.position().left-amount;_this.setContainerOffset(next,true);}else{var prev=_this.$schedule.position().left+amount;_this.setContainerOffset(prev,true);}});this.$toggleFav.click(function(){$(this).toggleClass('favourites-active');if($(this).hasClass('favourites-active')){$(this).find('.fa').removeClass('fa-heart-o').addClass('fa-heart');}else{$(this).find('.fa').removeClass('fa-heart').addClass('fa-heart-o');}
$('body').toggleClass('schedule-favourites-active');});},toggleDays:function(day){$items=this.$scheduleContainer;this.$schedule.removeClass("animate");$('.js-toggle-day[data-is-current=true]').attr('data-is-current','false');$('.js-toggle-day[data-show-day="'+day+'"]').attr('data-is-current','true');$items.attr('data-is-current','false');$('.js-schedule-container[data-day="'+day+'"]').attr('data-is-current','true');this.$schedule.off('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');this.setDimensions();APP.helpers.history.replaceState(null,null,'#'+day);},setDimensions:function(){var _this=this;this.$schedule=$('.js-schedule','.js-schedule-container[data-is-current="true"]');this.$schedule.on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(){_this.curLeftPos=_this.$schedule.position().left;_this.isAnimating=false;});if(APP.responsive.matchesBreakpoint('small')){this.itemWidth=240;this.leftOffset=220;this.$schedule.css("left",220+"px");}else{this.itemWidth=144;this.leftOffset=0;this.$schedule.css("left",0+"px");}
this.scheduleHeight=this.$schedule.outerHeight(true);this.$scheduleContainer.height(this.scheduleHeight);var $time=$('.js-schedule-time li','.js-schedule-container[data-is-current="true"]');this.scheduleWidth=$time.length*(this.itemWidth+1);this.visibleWidth=$(window).width()-this.leftOffset;if(this.scheduleWidth<this.visibleWidth){this.$schedule.width(this.visibleWidth);}else{this.$schedule.width(this.scheduleWidth);}
this.widthDiff=-((this.scheduleWidth-this.visibleWidth)-this.leftOffset);if(this.widthDiff>0){this.widthDiff=220;}
console.log('sh: '+this.$schedule.outerHeight(true));console.log('scheduleWidth: '+this.scheduleWidth);console.log('visibleWidth: '+this.visibleWidth);console.log('widthDiff: '+this.widthDiff);console.log('sw: '+this.scheduleWidth);console.log('-----------');this.curLeftPos=this.$schedule.position().left;},handleGesture:function(ev){ev.gesture.preventDefault();var _this=this,timer;switch(ev.type){case'dragright':case'dragleft':this.isDragging=true;var diff=-(this.lastDeltaX-ev.gesture.deltaX),newPos=(this.curLeftPos+(diff*1.7));this.setContainerOffset(newPos,false);break;case'swipeleft':this.setContainerOffset(this.widthDiff,true);this.curLeftPos=this.$schedule.position(this.widthDiff).left;ev.gesture.stopDetect();this.isDragging=false;break;case'swiperight':this.setContainerOffset(this.leftOffset,true);this.curLeftPos=this.$schedule.position(this.leftOffset).left;ev.gesture.stopDetect();this.isDragging=false;break;case'release':this.curLeftPos=this.$schedule.position().left;clearTimeout(timer);timer=setTimeout(function(){_this.isDragging=false;},100);break;}},setContainerOffset:function(amount,animate){var _this=this;this.$schedule.removeClass("animate");if(animate){this.$schedule.addClass("animate");}
if(amount>=this.leftOffset){amount=this.leftOffset;this.$prev.hide();}else if(amount<=this.widthDiff){amount=this.widthDiff+1;this.$next.hide();}
if(amount>this.widthDiff){this.$next.show();}
if(amount<this.leftOffset){this.$prev.show();}
_this.$schedule.css("left",amount+"px");}};APP.favourites={init:function(){this.bindSingleClickHandler();},bindSingleClickHandler:function(){var _this=this;$('.js-favourite-single').on('click',function(e){e.preventDefault();_this.handle($(this));});},bindClickHandlers:function($context){var _this=this,$selector=$context?$('.js-favourite',$context):$('.js-favourite');$selector.on('click',function(e){e.preventDefault();_this.handle($(this));});},handle:function(obj){if(APP.helpers.responseActive){return false;}
var bool=obj.attr('data-is-favourite'),url=obj.attr('data-favourite-url'),id=obj.attr('data-id');console.log(obj);if(bool==='false'){obj.attr('data-is-favourite',true);this.submit(obj,url,'add',id);}else{console.log('remove');obj.attr('data-is-favourite',false);this.submit(obj,url,'remove',id);}},submit:function(obj,url,action,id){console.log(id);var _this=this;$.ajax({type:'POST',data:'action='+action+'&id='+id,url:url,timeout:10000,error:function(xhr){var msg;try{msg=xhr.responseJSON.message;}catch(e){msg=obj.attr('data-error-message');}
console.log(xhr.status);if(obj.attr('data-is-favourite')=='true'){obj.attr('data-is-favourite',false);}else{obj.attr('data-is-favourite',true);}
if(xhr.status==401){msg=obj.attr('data-login-message');var loginLink='<br/><br/><a href="'+obj.attr('data-login-url')+'" class="ajax-button">Login</a>';APP.helpers.ajaxResponse(msg+loginLink);}else{APP.helpers.ajaxResponse(msg);}},success:function(data){if(action==='add'){$('.block--artist[data-id="'+id+'"], .schedule--artist[data-id="'+id+'"]').attr('data-is-favourite','true');}else{$('.block--artist[data-id="'+id+'"], .schedule--artist[data-id="'+id+'"]').attr('data-is-favourite','false');}
if(obj.hasClass('js-favourite-single')){if(obj.attr('data-is-favourite')=='true'){obj.html(obj.attr('data-favourite-remove-text'));}else{obj.html(obj.attr('data-favourite-add-text'));}}}});}};APP.artist={init:function(){if(!$('.artist-detail').length){return;}
APP.artist.bindClickHandlers();},bindClickHandlers:function($context){console.log('bind artist detail clickhandlers');var $videoSelector=$context?$('.media-item.cat-video',$context):$('.media-item.cat-video');console.log($videoSelector);$videoSelector.on('click',function(e){e.preventDefault();console.log('playVideo');APP.artist.playVideo($(this));});var $spotifySelector=$context?$('.media-item.cat-music',$context):$('.media-item.cat-music');$spotifySelector.on('click',function(e){e.preventDefault();APP.artist.spotifyPreview($(this));});},playVideo:function($playButton){$(window).scrollTop(0);console.log('toggle buttons');$('.fa.fa-stop').each(function(){$(this).removeClass('fa-stop').addClass('fa-play');});if($playButton.hasClass("active")){$playButton.find('.fa.fa-stop').addClass('fa-play').removeClass('fa-stop');console.log("close");$('.artist-picture .video-player__close').click();$('.artist-picture .js-video-container').remove();$playButton.removeClass("active");}else{console.log('stop video');$('.media-item, li.artist .play-button').each(function(){$(this).removeClass('active');});$playButton.addClass("active");audioElement.pause();$playButton.find('.fa.fa-play').removeClass('fa-play').addClass('fa-stop');$('.artist-picture .video-player__link').attr('data-video-link',$playButton.attr('data-src'));$('.artist-picture .video-player__link').click();}},spotifyPreview:function($spotifyButton){$('.fa.fa-stop').each(function(){$(this).removeClass('fa-stop').addClass('fa-play');});$('.artist-picture .video-player__close').click();$('.artist-picture .js-video-container').remove();if($spotifyButton.hasClass("active")){console.log("active");audioElement.pause();$spotifyButton.find('.fa.fa-stop').removeClass('fa-stop').addClass('fa-play');$spotifyButton.removeClass("active");}else{console.log("inactive");$spotifyButton.find('.fa.fa-play,.fa.fa-stop').toggleClass('fa-play').toggleClass('fa-stop');$('audio').remove();$('.media-item, li.artist .play-button').each(function(){$(this).removeClass('active');});$spotifyButton.addClass("active");audioElement.setAttribute('src',$spotifyButton.attr("data-src"));audioElement.setAttribute('autoplay','autoplay');audioElement.play();}},};$(function(){APP.init();});